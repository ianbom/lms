import{j as e,r as x,a as o,H as w}from"./app-CAUjhPa-.js";import{I as n}from"./Icon-JbZAKOja.js";import{l as k}from"./lodash-BuzZeOeL.js";import{A as _}from"./AdminLayout-NdCR5rO9.js";import"./Avatar-TdCvhKTU.js";function S({stats:s}){return e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"flex flex-col justify-between rounded-xl border border-slate-100 bg-white p-5 shadow-[0_2px_10px_-3px_rgba(6,81,237,0.1)]",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Orders"}),e.jsx("div",{className:"mt-2 flex items-end justify-between",children:e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.total})})]}),e.jsxs("div",{className:"flex flex-col justify-between rounded-xl border border-l-4 border-y-slate-100 border-l-orange-500 border-r-slate-100 bg-white p-5 shadow-[0_2px_10px_-3px_rgba(6,81,237,0.1)]",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Menunggu Verifikasi"}),e.jsx("div",{className:"mt-2 flex items-end justify-between",children:e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:s.pending})})]}),e.jsxs("div",{className:"flex flex-col justify-between rounded-xl border border-slate-100 bg-white p-5 shadow-[0_2px_10px_-3px_rgba(6,81,237,0.1)]",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Approved"}),e.jsx("div",{className:"mt-2 flex items-end justify-between",children:e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.approved})})]}),e.jsxs("div",{className:"flex flex-col justify-between rounded-xl border border-slate-100 bg-white p-5 shadow-[0_2px_10px_-3px_rgba(6,81,237,0.1)]",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Rejected"}),e.jsx("div",{className:"mt-2 flex items-end justify-between",children:e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.rejected})})]})]})}function C({orders:s,filters:a,pagination:l}){const[g,b]=x.useState(a.search||""),[i,p]=x.useState(!1),[r,h]=x.useState({isOpen:!1,orderId:null,action:null}),f=t=>{t&&o.get(t,{},{preserveState:!0,replace:!0})},j=x.useCallback(k.debounce(t=>{o.get(route("admin.orders"),{...a,search:t},{preserveState:!0,replace:!0})},300),[a]),v=t=>{b(t.target.value),j(t.target.value)},c=t=>{const d={...a,status:t||void 0};o.get(route("admin.orders"),d,{preserveState:!0,replace:!0})},N=()=>{const t=a.direction==="asc"?"desc":"asc";o.get(route("admin.orders"),{...a,sort:"created_at",direction:t},{preserveState:!0,replace:!0})},u=(t,d)=>{h({isOpen:!0,orderId:t,action:d})},m=()=>{h({isOpen:!1,orderId:null,action:null})},y=()=>{if(!r.orderId||!r.action)return;p(!0);const t=r.action==="approve"?"admin.orders.approve":"admin.orders.reject";o.post(route(t,{orderId:r.orderId}),{},{preserveScroll:!0,onSuccess:()=>{m()},onFinish:()=>{p(!1)}})};return e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-xl border border-slate-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-4 border-b border-slate-100 p-5 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"no-scrollbar flex gap-2 overflow-x-auto pb-2 lg:pb-0",children:[e.jsx("button",{onClick:()=>c(null),className:`whitespace-nowrap rounded-full px-4 py-1.5 text-sm font-medium transition-colors ${a.status?"bg-slate-100 text-slate-600 hover:bg-slate-200":"bg-primary text-white ring-2 ring-primary ring-offset-1"}`,children:"Semua"}),e.jsx("button",{onClick:()=>c("pending"),className:`whitespace-nowrap rounded-full px-4 py-1.5 text-sm font-medium transition-colors ${a.status==="pending"?"bg-primary text-white ring-2 ring-primary ring-offset-1":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Pending"}),e.jsx("button",{onClick:()=>c("approved"),className:`whitespace-nowrap rounded-full px-4 py-1.5 text-sm font-medium transition-colors ${a.status==="approved"?"bg-primary text-white ring-2 ring-primary ring-offset-1":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Approved"}),e.jsx("button",{onClick:()=>c("rejected"),className:`whitespace-nowrap rounded-full px-4 py-1.5 text-sm font-medium transition-colors ${a.status==="rejected"?"bg-primary text-white ring-2 ring-primary ring-offset-1":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Rejected"})]}),e.jsxs("div",{className:"flex flex-1 items-center gap-3 lg:justify-end",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:e.jsx(n,{name:"search",size:20})}),e.jsx("input",{className:"block w-full rounded-md border-slate-200 bg-slate-50 py-2 pl-10 pr-4 text-sm text-slate-900 placeholder-slate-400 focus:border-primary focus:bg-white focus:ring-primary",placeholder:"Search by Order ID, User...",type:"text",value:g,onChange:v})]}),e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:N,className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm font-medium transition-colors ${a.direction?"border-primary bg-primary/5 text-primary":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"}`,children:[e.jsx(n,{name:"sort",size:20}),e.jsxs("span",{className:"hidden sm:inline",children:["Sort ",a.direction==="asc"?"Asc":"Desc"]})]})})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50/50 text-xs uppercase tracking-wider text-slate-500",children:[e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Order ID"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"User"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Class"}),e.jsx("th",{className:"px-6 py-4 text-right font-semibold",children:"Harga Kelas"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Tanggal Transfer"}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:"Bukti"}),e.jsx("th",{className:"px-6 py-4 text-right font-semibold",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 bg-white",children:s.length>0?s.map(t=>e.jsxs("tr",{className:"group transition-colors hover:bg-slate-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900",children:t.id}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-cover bg-center bg-slate-200",style:t.user.avatar?{backgroundImage:`url('${t.user.avatar}')`}:{},children:!t.user.avatar&&t.user.name.charAt(0)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-900",children:t.user.name}),e.jsx("span",{className:"text-xs text-slate-500",children:t.user.email})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:t.class.title}),e.jsx("td",{className:"px-6 py-4 text-right text-sm font-bold text-slate-900",children:t.formatted_amount||`Rp ${t.amount.toLocaleString("id-ID")}`}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ring-1 ring-inset ${t.status==="pending"?"bg-orange-50 text-orange-700 ring-orange-600/20":t.status==="approved"?"bg-green-50 text-green-700 ring-green-600/20":"bg-red-50 text-red-700 ring-red-600/20"}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:new Date(t.transfer_date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("a",{href:t.proof_url,target:"_blank",rel:"noreferrer",className:`transition-colors ${t.proof_url?"text-slate-400 hover:text-primary":"cursor-not-allowed text-slate-300"}`,children:e.jsx(n,{name:"receipt_long"})})}),e.jsx("td",{className:"px-6 py-4 text-right",children:t.status==="pending"?e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>u(t.id,"reject"),disabled:i,className:"flex size-8 items-center justify-center rounded-md border border-slate-200 text-red-500 transition-colors hover:border-red-200 hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Reject",children:e.jsx(n,{name:"close",size:18})}),e.jsx("button",{onClick:()=>u(t.id,"approve"),disabled:i,className:"flex size-8 items-center justify-center rounded-md bg-primary text-white shadow-sm transition-colors hover:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed",title:"Approve",children:e.jsx(n,{name:"check",size:18})})]}):t.status==="rejected"?e.jsx("span",{className:"text-xs font-medium text-red-400",children:"Rejected"}):e.jsx("span",{className:"text-xs font-medium text-green-500",children:"Approved"})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-slate-500",children:"No orders found."})})})]})}),e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 bg-white px-6 py-4",children:[e.jsxs("p",{className:"text-sm text-slate-500",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:l.from||0})," to"," ",e.jsx("span",{className:"font-medium",children:l.to||0})," of"," ",e.jsx("span",{className:"font-medium",children:l.total})," results"]}),e.jsx("div",{className:"flex items-center gap-1",children:l.links.map((t,d)=>e.jsx("button",{onClick:()=>f(t.url),disabled:!t.url||t.active,className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${t.active?"bg-primary text-white":t.url?"bg-slate-100 text-slate-700 hover:bg-slate-200":"bg-slate-50 text-slate-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},d))})]}),r.isOpen&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 transition-opacity",onClick:m}),e.jsx("div",{className:"relative z-10 w-full max-w-md rounded-xl bg-white p-6 shadow-xl",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[e.jsx("div",{className:`flex h-14 w-14 items-center justify-center rounded-full ${r.action==="approve"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:e.jsx(n,{name:r.action==="approve"?"check_circle":"cancel",size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:r.action==="approve"?"Approve Order":"Reject Order"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:r.action==="approve"?"Apakah Anda yakin ingin menyetujui order ini? Peserta akan didaftarkan ke kelas.":"Apakah Anda yakin ingin menolak order ini? Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs("div",{className:"flex w-full gap-3 mt-2",children:[e.jsx("button",{onClick:m,disabled:i,className:"flex-1 rounded-lg border border-slate-200 px-4 py-2.5 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50 disabled:opacity-50",children:"Batal"}),e.jsx("button",{onClick:y,disabled:i,className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium text-white transition-colors disabled:opacity-50 ${r.action==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:i?"Memproses...":r.action==="approve"?"Ya, Setujui":"Ya, Tolak"})]})]})})]})]})}function D({orders:s,stats:a,filters:l}){return e.jsxs(_,{breadcrumbs:[{label:"Orders",href:"#"},{label:"List",href:"#"}],children:[e.jsx(w,{title:"Liste Order"}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-start sm:justify-between",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-slate-900",children:"Daftar Order Kelas"}),e.jsx("p",{className:"text-slate-500",children:"Manajemen Order Kelas"})]})}),e.jsx(S,{stats:a}),e.jsx(C,{orders:s.data,filters:l,pagination:{currentPage:s.current_page,lastPage:s.last_page,perPage:s.per_page,total:s.total,from:s.from,to:s.to,links:s.links}})]})]})}export{D as default};
