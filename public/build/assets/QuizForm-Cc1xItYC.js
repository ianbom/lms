import{j as e}from"./app-C5N62aGV.js";import{I as n}from"./Icon-CDWY4AO3.js";import{F as E,a as I}from"./FormInput-Bj6f1Po7.js";import{F as T}from"./FormSelect-DEdAkd8E.js";function $({onClick:s,className:d=""}){return e.jsxs("button",{type:"button",onClick:s,className:`group flex w-full flex-col items-center justify-center gap-2 rounded-xl border-2 border-dashed border-primary/30 py-8 text-primary transition-all hover:border-primary/50 hover:bg-primary/5 ${d}`,children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-3 transition-transform group-hover:scale-110",children:e.jsx(n,{name:"add",size:24})}),e.jsx("span",{className:"text-sm font-bold",children:"Add New Question"})]})}function K({option:s,questionId:d,onChange:c,onSelect:i,onRemove:x}){return e.jsxs("div",{className:`group flex items-center gap-3 rounded-md border p-2 pr-4 transition-all ${s.isCorrect?"border-green-200 bg-green-50/50":"border-transparent hover:border-slate-200 hover:bg-slate-50"}`,children:[e.jsxs("label",{className:"relative flex h-10 w-10 shrink-0 cursor-pointer items-center justify-center",children:[e.jsx("input",{type:"radio",name:`q${d}_answer`,checked:s.isCorrect,onChange:()=>i(s.id),className:"peer sr-only"}),e.jsx("div",{className:`h-6 w-6 rounded-full border-2 transition-all ${s.isCorrect?"border-primary bg-primary":"border-slate-300"}`}),s.isCorrect&&e.jsx(n,{name:"check",size:16,className:"pointer-events-none absolute text-white"})]}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:s.text,onChange:p=>c(s.id,p.target.value),className:`w-full border-0 bg-transparent p-0 text-sm focus:ring-0 ${s.isCorrect?"font-medium text-slate-800":"text-slate-600"}`,placeholder:"Enter option text..."})}),s.isCorrect&&e.jsx("span",{className:"rounded bg-white px-2 py-1 text-xs font-bold text-primary shadow-sm",children:"Correct"}),e.jsx("button",{type:"button",onClick:()=>x(s.id),className:"text-slate-400 opacity-0 transition-opacity hover:text-red-500 group-hover:opacity-100",children:e.jsx(n,{name:"close",size:18})})]})}function S({question:s,index:d,onToggle:c,onDelete:i,onDuplicate:x,onQuestionTextChange:p,onOptionChange:j,onOptionSelect:f,onOptionRemove:g,onAddOption:l}){return s.isExpanded?e.jsxs("div",{className:"group relative rounded-xl border-l-4 border-primary bg-white p-6 shadow-lg ring-1 ring-black/5 transition-all",children:[e.jsx("div",{className:"absolute left-3 top-6 cursor-move text-slate-300 hover:text-slate-500",children:e.jsx(n,{name:"drag_indicator",size:20})}),e.jsxs("div",{className:"pl-8",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between",children:[e.jsxs("h4",{className:"rounded bg-primary/10 px-2 py-1 text-xs font-bold uppercase tracking-wide text-primary",children:["Question ",d+1]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>x(s.id),className:"rounded-md p-2 text-slate-400 transition-colors hover:bg-primary/5 hover:text-primary",title:"Duplicate",children:e.jsx(n,{name:"content_copy",size:20})}),e.jsx("button",{type:"button",onClick:()=>i(s.id),className:"rounded-md p-2 text-slate-400 transition-colors hover:bg-red-50 hover:text-red-500",title:"Delete",children:e.jsx(n,{name:"delete",size:20})})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",value:s.text,onChange:u=>p(s.id,u.target.value),placeholder:"Enter your question...",className:"w-full border-0 border-b-2 border-slate-200 bg-transparent px-0 pb-2 text-lg font-medium text-[#101814] placeholder:text-slate-300 focus:border-primary focus:ring-0"})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("p",{className:"mb-1 text-xs font-semibold text-slate-500",children:"Answer Options"}),s.options.map(u=>e.jsx(K,{option:u,questionId:s.id,onChange:(m,N)=>j(s.id,m,N),onSelect:m=>f(s.id,m),onRemove:m=>g(s.id,m)},u.id)),e.jsxs("button",{type:"button",onClick:()=>l(s.id),className:"mt-1 flex w-fit items-center gap-2 text-sm font-semibold text-primary hover:underline",children:[e.jsx(n,{name:"add",size:18}),"Add Option"]})]}),e.jsx("div",{className:"mt-6 border-t border-slate-100 pt-4",children:e.jsxs("button",{type:"button",onClick:()=>c(s.id),className:"flex items-center gap-1 text-sm font-medium text-slate-400 hover:text-slate-600",children:[e.jsx(n,{name:"expand_less",size:18}),"Collapse"]})})]})]}):e.jsxs("div",{onClick:()=>c(s.id),className:"group flex cursor-pointer items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 transition-shadow hover:shadow-md",children:[e.jsx("div",{className:"cursor-move text-slate-300",children:e.jsx(n,{name:"drag_indicator",size:20})}),e.jsx("div",{className:"flex flex-1 flex-col gap-2 sm:flex-row sm:items-center sm:gap-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xs font-bold uppercase tracking-wide text-slate-400",children:["Q",d+1]}),e.jsx("p",{className:"line-clamp-1 text-sm font-medium text-slate-700",children:s.text||"Untitled Question"})]})}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(n,{name:"expand_more",size:20,className:"text-slate-400"})})]})}const F=[{value:"post-test",label:"Post-test",icon:"fact_check"},{value:"pretest",label:"Pre-test",icon:"timer"}];function R({value:s,onChange:d,className:c=""}){return e.jsxs("div",{className:c,children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold text-[#101814]",children:"Quiz Context"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 rounded-xl bg-slate-100 p-1",children:F.map(i=>e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"quiz_context",value:i.value,checked:s===i.value,onChange:()=>d(i.value),className:"peer sr-only"}),e.jsxs("div",{className:`flex items-center justify-center gap-2 rounded-md border px-4 py-2.5 transition-all ${s===i.value?"border-black/5 bg-white text-primary shadow-sm":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[e.jsx(n,{name:i.icon,size:20}),e.jsx("span",{className:"text-sm font-bold",children:i.label})]})]},i.value))})]})}const M=s=>({id:s,text:"",type:"multiple_choice",isExpanded:!0,points:1,options:[{id:s*100+1,text:"",isCorrect:!0},{id:s*100+2,text:"",isCorrect:!1}]});function G({data:s,errors:d,modules:c,onDataChange:i,isCompact:x=!1,showModuleSelector:p=!0}){const{title:j,moduleId:f,quizContext:g,questions:l}=s,u=t=>{i({...s,questions:l.map(a=>a.id===t?{...a,isExpanded:!a.isExpanded}:a)})},m=t=>{l.length>1&&i({...s,questions:l.filter(a=>a.id!==t)})},N=t=>{const a=l.find(r=>r.id===t);if(a){const r=Math.max(...l.map(h=>h.id))+1,o={...a,id:r,text:`${a.text} (Copy)`,options:a.options.map((h,A)=>({...h,id:r*100+A}))},b=l.findIndex(h=>h.id===t),w=[...l];w.splice(b+1,0,o),i({...s,questions:w})}},k=(t,a)=>{i({...s,questions:l.map(r=>r.id===t?{...r,text:a}:r)})},C=(t,a,r)=>{i({...s,questions:l.map(o=>o.id===t?{...o,options:o.options.map(b=>b.id===a?{...b,text:r}:b)}:o)})},z=(t,a)=>{i({...s,questions:l.map(r=>r.id===t?{...r,options:r.options.map(o=>({...o,isCorrect:o.id===a}))}:r)})},Q=(t,a)=>{i({...s,questions:l.map(r=>r.id===t?{...r,options:r.options.filter(o=>o.id!==a)}:r)})},P=t=>{i({...s,questions:l.map(a=>a.id===t?{...a,options:[...a.options,{id:Date.now(),text:"",isCorrect:!1}]}:a)})},y=()=>{const t=Math.max(...l.map(r=>r.id),0)+1,a=M(t);i({...s,questions:[...l.map(r=>({...r,isExpanded:!1})),a]})},v=l.length,O=l.reduce((t,a)=>t+(a.points||1),0),_=c.map(t=>({value:t.id.toString(),label:t.title}));return e.jsxs("div",{className:`grid grid-cols-1 gap-6 ${x?"":"lg:grid-cols-12 lg:gap-8"}`,children:[e.jsxs("div",{className:`flex flex-col gap-6 ${x?"":"lg:col-span-8"}`,children:[e.jsx(E,{icon:"tune",title:"Konfigurasi Kuis",children:e.jsxs("div",{className:"space-y-6",children:[p&&e.jsx(T,{label:"Pilih Modul",placeholder:"Pilih modul...",value:f,onChange:t=>i({...s,moduleId:t}),options:_,required:!0,error:d.module_id}),e.jsx(I,{label:"Judul Kuis",placeholder:"contoh: Kuis Akhir Modul 3",value:j,onChange:t=>i({...s,title:t}),required:!0,error:d.title}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(R,{value:g,onChange:t=>i({...s,quizContext:t})})})]})}),e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-[#f9fafb] px-4 py-3",children:[e.jsx("h2",{className:"text-base font-bold text-[#101814] sm:text-lg",children:"Pertanyaan"}),e.jsxs("span",{className:"rounded-full bg-primary/10 px-3 py-1 text-xs font-semibold text-primary",children:[v," ","Pertanyaan"]})]}),d.questions&&e.jsx("div",{className:"text-sm text-red-500",children:d.questions}),e.jsxs("div",{className:"space-y-4",children:[l.map((t,a)=>e.jsx(S,{question:t,index:a,onToggle:u,onDelete:m,onDuplicate:N,onQuestionTextChange:k,onOptionChange:C,onOptionSelect:z,onOptionRemove:Q,onAddOption:P},t.id)),e.jsx($,{onClick:y})]})]}),!x&&e.jsx("div",{className:"lg:col-span-4",children:e.jsxs("div",{className:"sticky top-6 space-y-6",children:[e.jsxs("div",{className:"overflow-hidden rounded-xl border border-[#e5e7eb] bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-[#e5e7eb] bg-gradient-to-r from-primary/5 to-primary/10 px-5 py-4",children:e.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-[#101814]",children:"Ringkasan Kuis"})}),e.jsxs("div",{className:"space-y-4 p-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-[#f9fafb] p-3",children:[e.jsx("span",{className:"text-sm text-[#5e6a62]",children:"Judul Kuis"}),e.jsx("span",{className:"max-w-[140px] truncate text-sm font-semibold text-[#101814]",children:j||"Belum ada judul"})]}),p&&e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-[#f9fafb] p-3",children:[e.jsx("span",{className:"text-sm text-[#5e6a62]",children:"Modul"}),e.jsx("span",{className:"max-w-[140px] truncate text-sm font-semibold text-[#101814]",children:c.find(t=>t.id.toString()===f)?.title||"Belum dipilih"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-[#f9fafb] p-3",children:[e.jsx("span",{className:"text-sm text-[#5e6a62]",children:"Tipe"}),e.jsx("span",{className:"text-sm font-semibold capitalize text-[#101814]",children:g==="pretest"?"Pretest":"Kuis Wajib"})]})]}),e.jsxs("div",{className:"mt-5 space-y-3 border-t border-[#e5e7eb] pt-5",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-[#5e6a62]",children:"Statistik Pertanyaan"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-primary/10 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{name:"quiz",size:16,className:"text-primary"}),e.jsx("span",{className:"text-sm font-semibold text-[#5e6a62]",children:"Total Pertanyaan"})]}),e.jsx("span",{className:"text-sm font-bold text-primary",children:v})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-[#f9fafb] p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{name:"star",size:16,className:"text-amber-500"}),e.jsx("span",{className:"text-sm font-semibold text-[#5e6a62]",children:"Total Poin"})]}),e.jsx("span",{className:"text-sm font-bold text-[#101814]",children:O})]})]})]}),e.jsxs("div",{className:"mt-5 space-y-2 border-t border-[#e5e7eb] pt-5",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-[#5e6a62]",children:"Aksi Cepat"}),e.jsxs("button",{type:"button",onClick:y,className:"flex w-full items-center justify-center gap-2 rounded-md bg-primary/5 px-3 py-2.5 text-sm font-semibold text-primary transition-colors hover:bg-primary/10",children:[e.jsx(n,{name:"add_circle",size:18}),"Tambah Pertanyaan"]})]})]})]}),e.jsx("div",{className:"rounded-xl border border-blue-200 bg-blue-50 p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(n,{name:"info",size:20,className:"shrink-0 text-blue-600"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900",children:"Tips Kuis"}),e.jsx("p",{className:"text-xs leading-relaxed text-blue-700",children:"Pastikan setiap pertanyaan memiliki minimal 2 opsi jawaban dan satu jawaban yang benar."})]})]})})]})})]})}export{G as Q,M as c};
