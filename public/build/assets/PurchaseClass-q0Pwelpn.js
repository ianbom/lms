import{j as e,L as N,r as h,u as v,H as w,a as j}from"./app-wmMc2fTp.js";import{B as k}from"./Breadcrumb-BHMHMIQj.js";import{I as i}from"./Icon-DwnJikYR.js";import{U as S}from"./UserLayout-zrK0Q7R-.js";function z(){return e.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"flex size-10 shrink-0 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:e.jsx(i,{name:"support_agent",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:"Butuh bantuan?"}),e.jsx(N,{href:"#",className:"text-xs text-primary hover:underline",children:"Hubungi CS kami di WhatsApp"})]})]})}function D({moduleTitle:s="Advanced Project Management: Mastering Agile",instructorName:l="Dr. Budi Santoso",thumbnailUrl:o="https://images.unsplash.com/photo-1542626991-cbc4e32524cc?w=800&q=80",price:c=1e6,discount:a=25e4}){const r=m=>`Rp ${m.toLocaleString("id-ID")}`,n=c-(a||0);return e.jsxs("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-100 bg-gradient-to-b from-gray-50 to-white px-6 py-4",children:e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Ringkasan Pesanan"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"relative h-20 w-20 shrink-0 overflow-hidden rounded-md bg-gray-100",children:e.jsx("img",{src:o,alt:s,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"line-clamp-2 text-sm font-semibold leading-tight text-gray-900",children:s}),e.jsxs("p",{className:"mt-1.5 text-xs text-gray-500",children:["oleh ",l]})]})]})}),e.jsxs("div",{className:"border-t border-gray-100 bg-gray-50/30 px-6 py-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Harga Normal"}),e.jsx("span",{className:"text-gray-400 line-through",children:r(c)})]}),a>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1.5 font-medium text-green-600",children:[e.jsx(i,{name:"local_offer",size:16}),"Diskon"]}),e.jsxs("span",{className:"font-semibold text-green-600",children:["-",r(a)]})]})]}),e.jsxs("div",{className:"mt-5 flex items-center justify-between border-t border-gray-200 pt-5",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Total Pembayaran"}),e.jsx("span",{className:"text-2xl font-bold text-primary",children:r(n)})]})]}),e.jsx("div",{className:"border-t border-gray-100 bg-green-50 px-6 py-3.5",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-medium text-green-700",children:[e.jsx(i,{name:"verified_user",size:16}),e.jsx("span",{children:"Garansi 30 Hari Uang Kembali"})]})})]})}function P(){const s=()=>{navigator.clipboard.writeText("829310293848")};return e.jsxs("section",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-100 bg-gradient-to-b from-gray-50 to-white px-6 py-4",children:[e.jsx("div",{className:"flex size-10 items-center justify-center rounded-md bg-blue-50 text-blue-600",children:e.jsx(i,{name:"account_balance",size:20})}),e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Transfer Bank Manual"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"rounded-md border border-gray-200 bg-gradient-to-br from-gray-50/50 to-white p-6",children:[e.jsx("div",{className:"mb-6 flex flex-wrap items-center justify-between gap-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-16 items-center justify-center overflow-hidden rounded-md border border-gray-200 bg-white",children:e.jsxs("svg",{viewBox:"0 0 100 32",className:"h-5 w-full",fill:"none",children:[e.jsx("rect",{width:"100",height:"32",fill:"#003D79",rx:"2"}),e.jsx("text",{x:"50",y:"22",fill:"white",fontFamily:"Arial Black, sans-serif",fontSize:"16",fontWeight:"900",textAnchor:"middle",children:"BCA"})]})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Bank Central Asia"})})]})}),e.jsxs("div",{className:"mb-5",children:[e.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Nomor Rekening"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-mono text-2xl font-bold tracking-wide text-gray-900",children:"8293 1029 3848"}),e.jsx("button",{onClick:s,className:"flex size-9 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-600 transition-all hover:border-primary hover:bg-primary-light hover:text-primary",title:"Salin Nomor Rekening",children:e.jsx(i,{name:"content_copy",size:18})})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"a.n. PT LMS Growth Indonesia"})]})]})})]})}function _({onFileSelect:s,error:l}){const[o,c]=h.useState(!1),[a,r]=h.useState(null),[n,m]=h.useState(null),g=t=>{t.preventDefault(),c(!0)},u=()=>{c(!1)},x=t=>{if(r(t.name),s(t),t.type.startsWith("image/")){const d=URL.createObjectURL(t);m(d)}else m(null)},p=t=>{t.preventDefault(),c(!1);const d=t.dataTransfer.files[0];d&&x(d)},f=t=>{const d=t.target.files?.[0];d&&x(d)};return e.jsxs("section",{className:"overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-100 bg-gray-50/50 px-6 py-4",children:[e.jsx("div",{className:"flex size-10 items-center justify-center rounded-md bg-primary-light text-primary",children:e.jsx(i,{name:"upload_file",size:22})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Upload Bukti Pembayaran"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("label",{className:`group flex min-h-[180px] w-full cursor-pointer flex-col items-center justify-center rounded-xl border-2 border-dashed transition-all ${o?"border-primary bg-primary-light":a?"border-green-400 bg-green-50":"border-gray-300 bg-gray-50 hover:border-primary hover:bg-primary-light/30"}`,htmlFor:"file-upload",onDragOver:g,onDragLeave:u,onDrop:p,children:[e.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:n?e.jsxs("div",{className:"relative mb-4 h-48 w-full overflow-hidden rounded-md",children:[e.jsx("img",{src:n,alt:"Preview",className:"h-full w-full object-contain"}),e.jsx("button",{type:"button",onClick:t=>{t.preventDefault(),m(null),r(null)},className:"absolute right-2 top-2 rounded-full bg-white/80 p-1 text-gray-600 hover:bg-white hover:text-red-500",children:e.jsx(i,{name:"close",size:20})})]}):a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3 flex size-14 items-center justify-center rounded-full bg-green-100",children:e.jsx(i,{name:"check_circle",size:32,className:"text-green-600"})}),e.jsx("p",{className:"mb-1 text-sm font-semibold text-green-700",children:"File berhasil dipilih"}),e.jsx("p",{className:"max-w-[200px] truncate text-xs text-gray-500",children:a})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3 flex size-14 items-center justify-center rounded-full bg-white shadow-sm transition-transform group-hover:scale-110",children:e.jsx(i,{name:"cloud_upload",size:28,className:"text-gray-400 group-hover:text-primary"})}),e.jsxs("p",{className:"mb-1 text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-primary",children:"Klik untuk upload"})," ","atau geser file ke sini"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"JPG, PNG atau PDF (MAX. 2MB)"})]})}),e.jsx("input",{id:"file-upload",type:"file",accept:".jpg,.jpeg,.png,.pdf",className:"hidden",onChange:f})]}),l&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:l})]})]})}function B({class:s,hasPendingOrder:l,hasOwnedClass:o}){const[c,a]=h.useState(!1),[r,n]=h.useState({title:"",message:"",type:""}),m=[{label:"Home",href:route("user.classes")},{label:"Classes",href:route("user.classes")},{label:"Purchase"}],{setData:g,post:u,processing:x,errors:p}=v({proof_file:null});h.useEffect(()=>{o?(n({title:"Kelas Sudah Dimiliki",message:"Anda sudah memiliki kelas ini. Silakan akses kelas melalui halaman Dashboard.",type:"owned"}),a(!0)):l&&(n({title:"Pesanan Sedang Diproses",message:"Anda sudah memiliki pesanan tertunda untuk kelas ini. Silakan tunggu proses verifikasi dari admin.",type:"pending"}),a(!0))},[l,o]);const f=b=>{if(b.preventDefault(),o){n({title:"Kelas Sudah Dimiliki",message:"Anda sudah memiliki kelas ini. Tidak dapat melakukan pembelian ulang.",type:"owned"}),a(!0);return}if(l){n({title:"Pesanan Sedang Diproses",message:"Anda sudah memiliki pesanan tertunda untuk kelas ini. Silakan tunggu proses verifikasi.",type:"pending"}),a(!0);return}u(route("user.classes.order",s.id),{forceFormData:!0})},t=()=>{a(!1),o?j.visit(route("user.dashboard")):l&&j.visit(route("user.my-order"))},d=s.mentors[0],y=s.price-s.price_final;return e.jsxs(S,{children:[e.jsx(w,{title:`Selesaikan Pembayaran - ${s.title}`}),e.jsx(k,{items:m}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl md:text-4xl",children:"Selesaikan Pembayaran"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 sm:text-base",children:"Lengkapi langkah di bawah ini untuk memulai akses belajar Anda."})]}),e.jsxs("form",{onSubmit:f,className:"grid grid-cols-1 items-start gap-6 sm:gap-8 lg:grid-cols-[2fr_1fr] lg:gap-10",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(P,{}),e.jsx(_,{onFileSelect:b=>g("proof_file",b),error:p.proof_file}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("button",{type:"submit",disabled:x,className:`flex w-full items-center justify-center gap-2 rounded-xl bg-primary px-8 py-4 text-lg font-bold text-white shadow-lg shadow-primary/20 transition-all hover:bg-primary-dark active:scale-[0.99] ${x?"cursor-not-allowed opacity-75":""}`,children:[e.jsx("span",{children:x?"Mengirim...":"Kirim Bukti Pembayaran"}),!x&&e.jsx(i,{name:"send",size:20})]}),e.jsxs("p",{className:"mt-4 flex items-center justify-center gap-1 text-center text-xs text-gray-400",children:[e.jsx(i,{name:"lock",size:14}),"Data Anda dienkripsi dan diproses dengan aman."]})]})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"space-y-6 md:sticky md:top-24",children:[e.jsx(D,{moduleTitle:s.title,instructorName:d?.name||"Mentor",thumbnailUrl:s.thumbnail_url||void 0,price:s.price,discount:y}),e.jsx(z,{})]})})]}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[e.jsx("div",{className:"mb-4 flex items-center justify-center",children:e.jsx("div",{className:`flex h-16 w-16 items-center justify-center rounded-full ${r.type==="owned"?"bg-green-100":"bg-yellow-100"}`,children:e.jsx(i,{name:r.type==="owned"?"check_circle":"schedule",size:32,className:r.type==="owned"?"text-green-600":"text-yellow-600"})})}),e.jsx("h3",{className:"mb-2 text-center text-xl font-bold text-gray-900",children:r.title}),e.jsx("p",{className:"mb-6 text-center text-gray-600",children:r.message}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>j.visit(route("user.classes")),className:"flex-1 rounded-lg border border-gray-300 px-4 py-2.5 font-medium text-gray-700 transition-colors hover:bg-gray-50",children:"Lihat Kelas Lain"}),e.jsx("button",{onClick:t,className:"flex-1 rounded-lg bg-primary px-4 py-2.5 font-medium text-white transition-colors hover:bg-primary-dark",children:r.type==="owned"?"Ke Dashboard":"Lihat Pesanan"})]})]})})]})}export{B as default};
