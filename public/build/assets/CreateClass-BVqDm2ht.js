import{r as s,j as a,H as S,L as w,a as C}from"./app-CFIjVXk8.js";import{C as F}from"./ClassForm-CrUumYJD.js";import{I as B}from"./Icon-C_10tq9A.js";import{A as D}from"./AdminLayout-CTt5z6_g.js";import"./FormInput-Bt7jZe1n.js";import"./FormSelect-60gfoWUj.js";import"./ImageUpload-CtRLLIkd.js";import"./Avatar-ilBv3em0.js";import"./RichTextEditor-BzTt8d0d.js";import"./Toast-DmhMsCt_.js";function U({categories:f,mentors:h}){const[i,d]=s.useState(!1),[r,x]=s.useState({title:"",description:"",category_id:"",price:"0",discount:"0",status:"draft"}),[l,c]=s.useState(null),[n,m]=s.useState(),[o,p]=s.useState([]),[b,u]=s.useState({}),g=e=>{p(o.filter(t=>t.id!==e))},j=e=>{o.find(t=>t.id===e.id)||p([...o,e])},v=e=>{if(e){const t=URL.createObjectURL(e);m(t),c(e)}else m(void 0),c(null)},y=()=>{d(!0),u({});const e=new FormData;e.append("title",r.title),e.append("description",r.description),e.append("category_id",r.category_id),e.append("price",r.price),e.append("discount",r.discount),e.append("status","draft"),o.forEach(t=>{e.append("mentors[]",t.id.toString())}),l&&e.append("thumbnail",l),C.post(route("admin.classes.store"),e,{forceFormData:!0,preserveScroll:!0,onError:t=>{u(t)},onFinish:()=>{d(!1)}})};return s.useEffect(()=>()=>{n&&URL.revokeObjectURL(n)},[n]),a.jsxs(D,{breadcrumbs:[{label:"Kelas",href:route("admin.classes")},{label:"Buat Kelas Baru"}],children:[a.jsx(S,{title:"Buat Kelas Baru"}),a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight text-[#101814]",children:"Buat Kelas Baru"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(w,{href:route("admin.classes"),className:"rounded-md px-4 py-2.5 text-sm font-medium text-[#5e6a62] transition-colors hover:bg-[#f0f5f2] hover:text-[#101814]",children:"Batalkan"}),a.jsxs("button",{type:"button",onClick:y,disabled:i,className:"flex items-center gap-2 rounded-md bg-primary px-4 py-2.5 text-sm font-bold text-white shadow-md shadow-primary/20 transition-all hover:bg-[#00622e] disabled:opacity-50",children:[a.jsx(B,{name:"publish",size:18}),i?"Menyimpan...":"Simpan Draft"]})]})]}),a.jsx(F,{formData:r,onFormDataChange:x,categories:f,mentors:h,selectedMentors:o,onAddMentor:j,onRemoveMentor:g,thumbnailPreview:n,onThumbnailChange:v,errors:b})]})}export{U as default};
