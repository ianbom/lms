import{j as e,r as p,H as L,a as v}from"./app-C5N62aGV.js";import{B as P}from"./Breadcrumb-B6cr6rc7.js";import{I as o}from"./Icon-CDWY4AO3.js";import{U as M}from"./UserLayout-C4FjxnAO.js";import{f as y,c as $,a as C,b as S,d as B}from"./class-5aNDD3_-.js";function T({lessons:s,totalVideos:l,totalDuration:n,onLessonClick:x}){s.filter(r=>!r.isLocked);const c=s.filter(r=>r.isLocked).length,a=r=>r.isPreview?"play_circle":r.isLocked?"lock":"play_circle";return e.jsxs("section",{className:"mb-8",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Materi Pembelajaran"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[l," Video • ",n," Total"]})]}),e.jsx("div",{className:"space-y-2",children:s.map(r=>e.jsxs("div",{onClick:()=>!r.isLocked&&x?.(r),className:`flex items-center justify-between rounded-xl border p-4 transition-colors ${r.isLocked?"cursor-not-allowed border-gray-100 bg-gray-50":"cursor-pointer border-gray-200 bg-white hover:border-primary/30 hover:bg-primary/5"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex size-10 items-center justify-center rounded-full ${r.isPreview?"bg-primary text-white":r.isLocked?"bg-gray-200 text-gray-400":"bg-gray-100 text-gray-600"}`,children:e.jsx(o,{name:a(r),size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${r.isLocked?"text-gray-400":"text-gray-900"}`,children:r.title}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Video • ",r.duration]})]})]}),r.isPreview&&e.jsx("span",{className:"rounded-md border border-gray-200 bg-white px-3 py-1 text-sm font-medium text-gray-700",children:"Preview"})]},r.id))}),c>0&&e.jsxs("p",{className:"mt-4 text-center text-sm text-gray-500",children:["+ ",c," video lainnya terkunci"]})]})}function R({mentor:s}){return e.jsxs("div",{className:"mt-4 rounded-2xl border border-gray-200 bg-white p-5",children:[e.jsx("p",{className:"mb-3 text-xs uppercase tracking-wide text-gray-500",children:"MENTOR"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-12 flex-shrink-0 rounded-full bg-gray-200 bg-cover bg-center",style:{backgroundImage:`url('${s.avatarUrl}')`}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:s.name}),(s.title||s.company)&&e.jsxs("p",{className:"text-sm text-gray-500",children:[s.title,s.title&&s.company&&" @ ",s.company]})]})]})]})}function V({price:s,originalPrice:l,discount:n,videoCount:x,duration:c,moduleCount:a,quizCount:r,onBuy:m,onAddWishlist:j,isEnrolled:u=!1}){const h=f=>`Rp ${f.toLocaleString("id-ID")}`;return e.jsxs("div",{className:"rounded-md border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-gray-600",children:"Harga Spesial"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900",children:s===null?"GRATIS":h(s)}),l&&e.jsx("span",{className:"text-lg text-gray-400 line-through decoration-gray-400 decoration-1",children:h(l)})]}),n&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-1 rounded bg-red-50 px-2 py-1 text-xs font-bold text-red-600",children:[e.jsx(o,{name:"local_fire_department",size:14}),"HEMAT ",n,"% HARI INI"]})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-2 gap-x-2 gap-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[e.jsx(o,{name:"play_circle",size:20,className:"text-primary"}),e.jsxs("span",{className:"font-medium text-gray-700",children:[x," Video"]})]}),e.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[e.jsx(o,{name:"schedule",size:20,className:"text-primary"}),e.jsx("span",{className:"font-medium text-gray-700",children:c})]}),e.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[e.jsx(o,{name:"view_module",size:20,className:"text-primary"}),e.jsxs("span",{className:"font-medium text-gray-700",children:[a," Modul"]})]}),e.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[e.jsx(o,{name:"quiz",size:20,className:"text-primary"}),e.jsxs("span",{className:"font-medium text-gray-700",children:[r," Kuis"]})]})]}),e.jsx("div",{className:"py-2",children:e.jsxs("button",{onClick:m,className:`flex w-full items-center justify-center gap-2 rounded-xl px-6 py-3.5 font-bold text-white shadow-lg transition-all ${u?"bg-green-600 shadow-green-600/20 hover:bg-green-700 hover:shadow-green-600/40":"bg-primary shadow-primary/20 hover:bg-primary-dark hover:shadow-primary/40"}`,children:[u?"Belajar Sekarang":"Beli Modul Sekarang",e.jsx(o,{name:u?"play_arrow":"arrow_forward",size:20})]})})]})}function A({tags:s}){return e.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:s.map((l,n)=>e.jsx("span",{className:"rounded-full bg-primary/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-primary",children:l},n))})}function E({thumbnailUrl:s,videoUrl:l,onPlay:n}){const c=l?(a=>{const r=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,m=a.match(r);return m&&m[2].length===11?m[2]:null})(l):null;return c?e.jsx("div",{className:"group relative aspect-video overflow-hidden rounded-2xl bg-gray-900 shadow-lg",children:e.jsx("iframe",{className:"absolute inset-0 h-full w-full",src:`https://www.youtube.com/embed/${c}?autoplay=1`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):e.jsxs("div",{className:"group relative aspect-video overflow-hidden rounded-2xl bg-gray-900 shadow-lg",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url('${s}')`}}),e.jsx("button",{onClick:n,className:"absolute inset-0 flex items-center justify-center bg-black/30 transition-colors hover:bg-black/40",children:e.jsx("div",{className:"transform rounded-full bg-primary p-4 shadow-lg transition-transform hover:scale-110",children:e.jsx(o,{name:"play_arrow",size:40,className:"text-white"})})}),e.jsx("div",{className:"absolute bottom-4 right-4",children:e.jsxs("button",{className:"flex items-center gap-2 rounded-md bg-black/70 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-black/80",children:[e.jsx(o,{name:"visibility",size:18}),"Preview Trailer"]})})]})}function Y({class:s,previewVideos:l,isEnrolled:n=!1,firstVideoId:x=null}){const c=[{label:"Beranda",href:"/"},{label:"Semua Kelas",href:route("user.classes")},{label:s.title}],a=p.useMemo(()=>l?.modules?l.modules.flatMap(t=>t.videos):[],[l]),[r,m]=p.useState(a.length>0?a[0]:null);p.useEffect(()=>{a.length>0&&!r&&m(a[0])},[a]);const j=p.useMemo(()=>{const t=[];return s.modules.forEach(i=>{i.videos.forEach(d=>{t.push({id:d.id,title:d.title,duration:y(d.duration_sec),type:"video",isPreview:d.is_preview,isLocked:!d.is_preview})}),i.quizzes.forEach(d=>{t.push({id:d.id,title:d.title,duration:d.questions_count?`${d.questions_count} soal`:"-",type:"quiz",isPreview:!1,isLocked:!0})})}),t},[s.modules]),u=$(s.modules),h=C(s.modules),f=S(s.modules),b=B(u),N=p.useMemo(()=>{const t=[];return s.category?.name&&t.push(s.category.name.toUpperCase()),s.discount>0&&t.push(`DISKON ${s.discount}%`),(s.price===0||s.price_final===0)&&t.push("GRATIS"),t},[s]),g=s.mentors[0],w=()=>{console.log("Playing preview video")},k=t=>{m(t);const i=document.getElementById("video-player-container");i&&i.scrollIntoView({behavior:"smooth",block:"center"})},_=()=>{n&&x?v.visit(route("user.study.watch",{classId:s.id,videoId:x})):v.visit(route("user.classes.purchase",{classId:s.id}))},z=()=>{console.log("Add to wishlist:",s.id)},I=t=>{console.log("Lesson clicked:",t.id)};return e.jsxs(M,{children:[e.jsx(L,{title:`${s.title} - ImpactAcademy`}),e.jsx(P,{items:c}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-[1fr_360px]",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{id:"video-player-container",className:"scroll-mt-24",children:e.jsx(E,{thumbnailUrl:s.thumbnail_url||"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=800&h=450&fit=crop",videoUrl:r?.youtube_url,onPlay:w})}),a.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"mb-2 text-sm font-semibold text-gray-900",children:["Video Preview (",a.length,")"]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4",children:a.map(t=>e.jsxs("button",{onClick:()=>k(t),className:`group relative min-w-[200px] flex-shrink-0 cursor-pointer overflow-hidden rounded-md border transition-all ${r?.id===t.id?"border-primary ring-2 ring-primary ring-opacity-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"relative aspect-video w-full bg-gray-100",children:[t.youtube_url?e.jsx("img",{src:`https://img.youtube.com/vi/${t.youtube_url.split("v=")[1]?.split("&")[0]}/mqdefault.jpg`,alt:t.title,className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full items-center justify-center bg-gray-200",children:e.jsx("span",{className:"text-gray-400",children:"No Thumb"})}),r?.id===t.id&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40",children:e.jsx("div",{className:"rounded-full bg-primary p-1.5 text-white",children:e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),e.jsxs("div",{className:"p-2 text-left",children:[e.jsx("p",{className:`line-clamp-2 text-sm font-medium ${r?.id===t.id?"text-primary":"text-gray-900 group-hover:text-primary"}`,children:t.title}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:y(t.duration_sec)})]})]},t.id))})]}),e.jsx("div",{className:"mt-6",children:e.jsx(A,{tags:N})}),e.jsx("h1",{className:"mb-3 text-2xl font-bold text-gray-900 md:text-3xl",children:s.title}),e.jsx("p",{className:"mb-8 leading-relaxed text-gray-600",children:s.description||"Tidak ada deskripsi."}),s.modules.length>0?e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-gray-900",children:"Daftar Modul"}),s.modules.map(t=>e.jsxs("div",{className:"mb-6 overflow-hidden rounded-md border border-gray-200 bg-white",children:[e.jsxs("div",{className:"border-b border-gray-100 bg-gray-50 px-4 py-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.title}),t.description&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t.description}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:[t.videos.length," video"]}),e.jsxs("span",{children:[t.quizzes.length," kuis"]})]})]}),e.jsxs("ul",{className:"divide-y divide-gray-100",children:[t.videos.map(i=>e.jsxs("li",{className:"flex items-center justify-between px-4 py-3 transition-colors hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full ${i.is_preview?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:i.is_preview?e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}):e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:i.title}),i.is_preview&&e.jsx("span",{className:"ml-2 rounded bg-green-100 px-2 py-0.5 text-xs font-medium text-green-700",children:"Preview"})]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:y(i.duration_sec)})]},`video-${i.id}`)),t.quizzes.map(i=>e.jsxs("li",{className:"flex items-center justify-between px-4 py-3 transition-colors hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-purple-100 text-purple-600",children:e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),e.jsx("span",{className:"font-medium text-gray-900",children:i.title})]}),e.jsx("span",{className:"text-sm text-gray-500",children:i.questions_count?`${i.questions_count} soal`:"-"})]},`quiz-${i.id}`))]})]},t.id))]}):e.jsx(T,{lessons:j,totalVideos:h,totalDuration:b,onLessonClick:I})]}),e.jsxs("div",{className:"lg:sticky lg:top-24 lg:h-fit",children:[e.jsx(V,{price:s.price_final,originalPrice:s.discount>0?s.price:void 0,discount:s.discount>0?s.discount:void 0,videoCount:h,duration:b,moduleCount:s.modules.length,quizCount:f,onBuy:_,onAddWishlist:z,isEnrolled:n}),g&&e.jsx(R,{mentor:{name:g.name,avatarUrl:g.avatar_url||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",title:g.headline,company:void 0}}),s.mentors.length>1&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold text-gray-700",children:"Mentor Lainnya"}),e.jsx("div",{className:"space-y-3",children:s.mentors.slice(1).map(t=>e.jsxs("div",{className:"flex items-center gap-3 rounded-md border border-gray-100 bg-white p-3",children:[e.jsx("img",{src:t.avatar_url||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",alt:t.name,className:"h-10 w-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.headline})]})]},t.id))})]})]})]})]})}export{Y as default};
