import{j as e,L as I,a as b,r as o,H as z}from"./app-BMQkHA4d.js";import{I as d}from"./Icon-CFmQEsGQ.js";import{l as R}from"./lodash-DwRw6nt0.js";import{U as D}from"./UserDashboardLayout-BJwIG2lE.js";function L({columns:a,data:r,keyExtractor:l,emptyState:n,className:i=""}){return e.jsx("div",{className:`overflow-x-auto ${i}`,children:e.jsxs("table",{className:"w-full border-collapse text-left",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-slate-100 bg-slate-50/50 text-xs uppercase tracking-wider text-slate-500",children:a.map(s=>e.jsx("th",{className:`px-6 py-4 font-semibold ${s.headerClassName||""}`,children:s.header},s.key))})}),e.jsx("tbody",{className:"divide-y divide-slate-100 bg-white",children:r.length>0?r.map(s=>e.jsx("tr",{className:"group transition-colors hover:bg-slate-50",children:a.map(c=>e.jsx("td",{className:`px-6 py-4 ${c.className||""}`,children:c.render(s)},c.key))},l(s))):e.jsx("tr",{children:e.jsx("td",{colSpan:a.length,className:"px-6 py-12 text-center",children:n?e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-slate-100 text-slate-400",children:e.jsx(d,{name:n.icon,size:32})}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-slate-900",children:n.title}),e.jsx("p",{className:"mb-6 text-sm text-slate-500",children:n.description}),n.action&&e.jsxs(I,{href:n.action.href,className:"inline-flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-primary-dark",children:[n.action.icon&&e.jsx(d,{name:n.action.icon,size:18}),n.action.label]})]}):e.jsx("span",{className:"text-slate-500",children:"Tidak ada data"})})})})]})})}const O=[{key:"total",icon:"receipt_long",label:"Total Order",bgColor:"bg-primary/10",textColor:"text-primary"},{key:"pending",icon:"pending",label:"Pending",bgColor:"bg-orange-50",textColor:"text-orange-600"},{key:"approved",icon:"check_circle",label:"Approved",bgColor:"bg-green-50",textColor:"text-green-600"},{key:"rejected",icon:"cancel",label:"Rejected",bgColor:"bg-red-50",textColor:"text-red-600"}];function F({stats:a}){return e.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:O.map(r=>e.jsxs("div",{className:"border-border-light shadow-card flex items-center gap-4 rounded-xl border bg-white p-4",children:[e.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-md ${r.bgColor} ${r.textColor}`,children:e.jsx(d,{name:r.icon,size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a[r.key]}),e.jsx("p",{className:"text-sm text-slate-500",children:r.label})]})]},r.key))})}function P({from:a,to:r,total:l,links:n,className:i=""}){const s=c=>{c&&b.get(c,{},{preserveState:!0,replace:!0})};return l===0?null:e.jsxs("div",{className:`flex items-center justify-between border-t border-slate-200 bg-white px-6 py-4 ${i}`,children:[e.jsxs("p",{className:"text-sm text-slate-500",children:["Menampilkan ",e.jsx("span",{className:"font-medium",children:a||0})," ","sampai ",e.jsx("span",{className:"font-medium",children:r||0})," dari"," ",e.jsx("span",{className:"font-medium",children:l})," hasil"]}),e.jsx("div",{className:"flex items-center gap-1",children:n.map((c,g)=>e.jsx("button",{onClick:()=>s(c.url),disabled:!c.url||c.active,className:`rounded-md px-3 py-1.5 text-sm font-medium transition-colors ${c.active?"bg-primary text-white":c.url?"bg-slate-100 text-slate-700 hover:bg-slate-200":"cursor-not-allowed bg-slate-50 text-slate-400"}`,dangerouslySetInnerHTML:{__html:c.label}},g))})]})}const A={pending:{bg:"bg-orange-50",text:"text-orange-700",ring:"ring-orange-600/20",label:"Pending"},approved:{bg:"bg-green-50",text:"text-green-700",ring:"ring-green-600/20",label:"Approved"},rejected:{bg:"bg-red-50",text:"text-red-700",ring:"ring-red-600/20",label:"Rejected"},active:{bg:"bg-blue-50",text:"text-blue-700",ring:"ring-blue-600/20",label:"Active"},completed:{bg:"bg-green-50",text:"text-green-700",ring:"ring-green-600/20",label:"Completed"}};function E({status:a,size:r="sm"}){const l=A[a],n=r==="sm"?"px-2.5 py-0.5 text-xs":"px-3 py-1 text-sm";return e.jsx("span",{className:`inline-flex items-center rounded-full font-semibold ring-1 ring-inset ${l.bg} ${l.text} ${l.ring} ${n}`,children:l.label})}const M=[{value:"created_at",direction:"desc",label:"Terbaru"},{value:"created_at",direction:"asc",label:"Terlama"},{value:"amount",direction:"desc",label:"Harga Tertinggi"},{value:"amount",direction:"asc",label:"Harga Terendah"},{value:"title",direction:"asc",label:"A-Z"},{value:"title",direction:"desc",label:"Z-A"}];function H({filters:a,routeName:r,searchPlaceholder:l="Cari...",filterOptions:n=[],filterKey:i="status",sortOptions:s=M,showSort:c=!0,showFilter:g=!0}){const[f,N]=o.useState(a.search||""),[h,x]=o.useState(!1),[p,u]=o.useState(!1),v=o.useRef(null),j=o.useRef(null);o.useEffect(()=>{const t=m=>{v.current&&!v.current.contains(m.target)&&x(!1),j.current&&!j.current.contains(m.target)&&u(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const y=o.useCallback(R.debounce(t=>{b.get(route(r),{...a,search:t},{preserveState:!0,replace:!0})},300),[a,r]),k=t=>{N(t.target.value),y(t.target.value)},w=t=>{const m={...a,[i]:t||void 0};b.get(route(r),m,{preserveState:!0,replace:!0}),x(!1)},C=t=>{b.get(route(r),{...a,sort:t.value,direction:t.direction},{preserveState:!0,replace:!0}),u(!1)},_=n.find(t=>t.value===a[i]||!a[i]&&t.value===null)?.label||"Filter",$=s.find(t=>t.value===a.sort&&t.direction===a.direction)?.label||"Urutkan",T=a[i]!==void 0,S=a.sort!==void 0&&a.direction!==void 0;return e.jsxs("div",{className:"flex flex-col gap-4 border-b border-slate-100 p-5 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[g&&n.length>0&&e.jsxs("div",{ref:v,className:"relative",children:[e.jsxs("button",{onClick:()=>{x(!h),u(!1)},className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm font-medium transition-colors ${T?"border-primary bg-primary/5 text-primary":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"}`,children:[e.jsx(d,{name:"filter_list",size:20}),e.jsx("span",{children:_}),e.jsx(d,{name:"expand_more",size:18,className:`transition-transform ${h?"rotate-180":""}`})]}),h&&e.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 min-w-[160px] overflow-hidden rounded-md border border-slate-200 bg-white py-1 shadow-lg",children:n.map(t=>e.jsxs("button",{onClick:()=>w(t.value),className:`flex w-full items-center gap-2 px-4 py-2 text-left text-sm transition-colors ${a[i]===t.value||!a[i]&&t.value===null?"bg-primary/10 font-medium text-primary":"text-slate-700 hover:bg-slate-50"}`,children:[(a[i]===t.value||!a[i]&&t.value===null)&&e.jsx(d,{name:"check",size:16}),e.jsx("span",{className:a[i]===t.value||!a[i]&&t.value===null?"":"pl-6",children:t.label})]},t.value??"all"))})]}),c&&e.jsxs("div",{ref:j,className:"relative",children:[e.jsxs("button",{onClick:()=>{u(!p),x(!1)},className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm font-medium transition-colors ${S?"border-primary bg-primary/5 text-primary":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"}`,children:[e.jsx(d,{name:"sort",size:20}),e.jsx("span",{children:$}),e.jsx(d,{name:"expand_more",size:18,className:`transition-transform ${p?"rotate-180":""}`})]}),p&&e.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 min-w-[180px] overflow-hidden rounded-md border border-slate-200 bg-white py-1 shadow-lg",children:s.map((t,m)=>e.jsxs("button",{onClick:()=>C(t),className:`flex w-full items-center gap-2 px-4 py-2 text-left text-sm transition-colors ${a.sort===t.value&&a.direction===t.direction?"bg-primary/10 font-medium text-primary":"text-slate-700 hover:bg-slate-50"}`,children:[a.sort===t.value&&a.direction===t.direction&&e.jsx(d,{name:"check",size:16}),e.jsx("span",{className:a.sort===t.value&&a.direction===t.direction?"":"pl-6",children:t.label})]},`${t.value}-${t.direction}`))})]})]}),e.jsx("div",{className:"flex flex-1 items-center gap-3 lg:justify-end",children:e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:e.jsx(d,{name:"search",size:20})}),e.jsx("input",{className:"block w-full rounded-md border-slate-200 bg-slate-50 py-2 pl-10 pr-4 text-sm text-slate-900 placeholder-slate-400 focus:border-primary focus:bg-white focus:ring-primary",placeholder:l,type:"text",value:f,onChange:k})]})})]})}const U=[{value:null,label:"Semua"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}],B=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),Z=a=>new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"});function V({orders:a,stats:r,filters:l}){const n=o.useMemo(()=>[{key:"id",header:"Order ID",render:s=>e.jsxs("span",{className:"text-sm font-medium text-slate-900",children:["#ORD-",s.id]})},{key:"class",header:"Kelas",render:s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-14 rounded-md bg-slate-200 bg-cover bg-center",style:s.class.thumbnail_url?{backgroundImage:`url('${s.class.thumbnail_url}')`}:{}}),e.jsx("span",{className:"max-w-[200px] truncate text-sm font-semibold text-slate-900",children:s.class.title})]})},{key:"amount",header:"Total",headerClassName:"text-right",className:"text-right",render:s=>e.jsx("span",{className:"text-sm font-bold text-slate-900",children:B(s.amount)})},{key:"status",header:"Status",render:s=>e.jsx(E,{status:s.status})},{key:"transfer_date",header:"Tanggal Transfer",render:s=>e.jsx("span",{className:"text-sm text-slate-600",children:Z(s.transfer_date)})},{key:"proof",header:"Bukti",headerClassName:"text-center",className:"text-center",render:s=>s.proof_url?e.jsxs("a",{href:s.proof_url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 text-sm font-medium text-primary transition-colors hover:text-primary-dark",children:[e.jsx(d,{name:"visibility",size:18}),"Lihat"]}):e.jsx("span",{className:"text-sm text-slate-400",children:"-"})}],[]),i=o.useMemo(()=>({icon:"receipt_long",title:"Tidak ada pesanan",description:l.search||l.status?"Coba ubah filter atau kata kunci pencarian.":"Kamu belum memiliki pesanan. Mulai beli kelas sekarang!",action:!l.search&&!l.status?{label:"Jelajahi Kelas",href:route("user.classes"),icon:"explore"}:void 0}),[l.search,l.status]);return e.jsxs(D,{children:[e.jsx(z,{title:"Riwayat Pesanan"}),e.jsxs("div",{className:"mt-6 flex flex-col gap-1 lg:mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-slate-900 sm:text-3xl",children:"Riwayat Pesanan"}),e.jsx("p",{className:"text-sm text-slate-500 sm:text-base",children:"Lihat dan pantau status pembelian kelas kamu."})]}),e.jsx(F,{stats:r}),e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-xl border border-slate-200 bg-white shadow-sm",children:[e.jsx(H,{filters:l,routeName:"user.my-order",searchPlaceholder:"Cari order ID atau nama kelas...",filterOptions:U}),e.jsx(L,{columns:n,data:a.data,keyExtractor:s=>s.id,emptyState:i}),a.data.length>0&&e.jsx(P,{from:a.from,to:a.to,total:a.total,links:a.links})]})]})}export{V as default};
