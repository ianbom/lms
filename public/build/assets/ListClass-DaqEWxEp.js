import{j as e,L as G,r as x,H}from"./app-wjlaHdqt.js";import{I as p}from"./Icon-CqVksNsp.js";import{e as L,F as Q,S as A}from"./class-5aNDD3_-.js";import{U as q}from"./UserLayout-Bo3T7Bvr.js";function V({item:s,className:r=""}){const i=s.discount>0,c=s.price_final===0;return e.jsxs(G,{href:`/user/classes/${s.id}`,className:`group relative flex aspect-[3/4] flex-col overflow-hidden rounded-xl border border-slate-200 bg-white shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:border-[rgba(0,117,61,0.35)] hover:shadow-md focus:outline-none focus:ring-2 focus:ring-[#00753D]/50 focus:ring-offset-2 ${r}`,children:[e.jsxs("div",{className:"relative h-[55%] shrink-0 overflow-hidden bg-slate-100",children:[e.jsx("img",{src:s.thumbnail_url||"/images/placeholder.jpg",alt:s.title,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-transparent"}),e.jsx("div",{className:"absolute left-3 top-3",children:e.jsx("span",{className:"inline-flex items-center rounded-md bg-white/95 px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider text-slate-700 shadow-sm backdrop-blur-sm",children:s.category?.name||"Umum"})}),i&&e.jsx("div",{className:"absolute right-3 top-3",children:e.jsxs("span",{className:"inline-flex items-center rounded-md bg-[#00753D] px-2.5 py-1 text-[10px] font-bold text-white shadow-sm",children:["-",s.discount,"%"]})}),c&&!i&&e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx("span",{className:"inline-flex items-center rounded-md bg-emerald-500 px-2.5 py-1 text-[10px] font-bold text-white shadow-sm",children:"GRATIS"})})]}),e.jsxs("div",{className:"flex h-[45%] flex-col p-4",children:[e.jsx("h3",{className:"line-clamp-2 text-sm font-bold leading-snug text-slate-900 group-hover:text-[#00753D]",children:s.title}),e.jsxs("div",{className:"flex items-center gap-3 border-t border-slate-100 pt-3",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-1.5",children:[e.jsx("div",{className:"h-5 w-5 shrink-0 overflow-hidden rounded-full bg-slate-200",children:e.jsx("img",{src:s.mentors[0]?.photo_url||`https://ui-avatars.com/api/?name=${s.mentors[0]?.name||"M"}&background=00753D&color=fff&size=40`,alt:s.mentors[0]?.name,className:"h-full w-full object-cover"})}),e.jsx("span",{className:"truncate text-xs text-slate-600",children:s.mentors[0]?.name||"Mentor"})]}),e.jsxs("div",{className:"flex shrink-0 items-center gap-1 text-slate-500",children:[e.jsx(p,{name:"play_circle",size:14}),e.jsx("span",{className:"text-xs",children:s.modules_count})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[i&&e.jsx("span",{className:"text-[10px] text-slate-400 line-through",children:L(s.price)}),e.jsx("span",{className:"text-sm font-bold text-[#00753D]",children:L(s.price_final)})]}),e.jsx("span",{className:"rounded-md border border-[#00753D] px-3 py-1.5 text-xs font-semibold text-[#00753D] transition-colors group-hover:bg-[#00753D] group-hover:text-white",children:c?"Mulai":"Detail"})]})]})]})}function J({onReset:s}){return e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-dashed border-slate-300 bg-slate-50 py-16 text-center",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white shadow-sm ring-1 ring-slate-100",children:e.jsx(p,{name:"search_off",size:32,className:"text-slate-400"})}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-slate-900",children:"Tidak ada kelas ditemukan"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Coba sesuaikan filter pencarian Anda atau gunakan kata kunci lain."}),e.jsx("button",{onClick:s,className:"mt-6 font-medium text-primary hover:underline",children:"Reset semua filter"})]})}const W=["all","free","paid"];function X({activeTab:s,onTabChange:r}){return e.jsx("div",{className:"flex items-center gap-2 rounded-md border border-slate-200 bg-white p-1",children:W.map(i=>e.jsx("button",{onClick:()=>r(i),className:`rounded-md px-3 py-1.5 text-sm font-medium transition-colors ${s===i?"bg-primary/10 text-primary":"text-slate-600 hover:bg-slate-50"}`,children:Q[i]},i))})}function z({label:s,options:r,selectedValue:i,onSelect:c,isOpen:d,onToggle:a,allLabel:h="Semua"}){const n=i!==null,j=r.find(m=>m.id===i)?.name||s;return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:a,className:`flex items-center gap-2 rounded-md border px-4 py-2.5 text-sm font-medium transition-colors ${n?"border-primary bg-primary/5 text-primary":"border-slate-200 bg-white text-slate-700 hover:border-primary"}`,children:[e.jsx("span",{children:j}),e.jsx(p,{name:"expand_more",size:16})]}),d&&e.jsxs("div",{className:"absolute right-0 top-full z-40 mt-1 max-h-60 min-w-[200px] overflow-auto rounded-md border border-slate-200 bg-white py-1 shadow-lg",children:[e.jsx("button",{onClick:()=>c(null),className:`w-full px-4 py-2 text-left text-sm ${i===null?"bg-primary/5 font-medium text-primary":"text-slate-700 hover:bg-slate-50"}`,children:h}),r.map(m=>e.jsx("button",{onClick:()=>c(m.id),className:`w-full px-4 py-2 text-left text-sm ${i===m.id?"bg-primary/5 font-medium text-primary":"text-slate-700 hover:bg-slate-50"}`,children:m.name},m.id))]})]})}function Y({currentPage:s,totalPages:r,onPageChange:i}){if(r<=1)return null;const c=a=>{i(a),window.scrollTo({top:0,behavior:"smooth"})},d=()=>{const a=[];if(r<=5)for(let n=1;n<=r;n++)a.push(n);else if(s<=3){for(let n=1;n<=4;n++)a.push(n);a.push("..."),a.push(r)}else if(s>=r-2){a.push(1),a.push("...");for(let n=r-3;n<=r;n++)a.push(n)}else{a.push(1),a.push("...");for(let n=s-1;n<=s+1;n++)a.push(n);a.push("..."),a.push(r)}return a};return e.jsxs("div",{className:"mt-8 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>c(Math.max(1,s-1)),disabled:s===1,className:"flex h-9 w-9 items-center justify-center rounded-md border border-slate-200 bg-white hover:border-primary hover:text-primary disabled:opacity-50",children:e.jsx(p,{name:"chevron_left",size:20})}),d().map((a,h)=>typeof a=="number"?e.jsx("button",{onClick:()=>c(a),className:`flex h-9 min-w-[36px] items-center justify-center rounded-md px-3 text-sm font-medium ${s===a?"bg-primary text-white shadow-sm":"border border-slate-200 bg-white text-slate-600 hover:border-primary hover:text-primary"}`,children:a},h):e.jsx("span",{className:"flex h-9 items-center px-2 text-slate-400",children:a},h)),e.jsx("button",{onClick:()=>c(Math.min(r,s+1)),disabled:s===r,className:"flex h-9 w-9 items-center justify-center rounded-md border border-slate-200 bg-white hover:border-primary hover:text-primary disabled:opacity-50",children:e.jsx(p,{name:"chevron_right",size:20})})]})}function Z({value:s,onChange:r,placeholder:i="Cari topik, kelas, atau mentor...",className:c=""}){return e.jsxs("div",{className:`relative w-full lg:max-w-md ${c}`,children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(p,{name:"search",size:20,className:"text-slate-400"})}),e.jsx("input",{type:"text",className:"block w-full rounded-md border-slate-200 bg-white py-2.5 pl-10 pr-3 text-sm text-slate-900 placeholder:text-slate-400 focus:border-primary focus:ring-primary",placeholder:i,value:s,onChange:d=>r(d.target.value)})]})}const P=["newest","oldest","title_asc","title_desc","price_asc","price_desc"];function ee({value:s,onChange:r,isOpen:i,onToggle:c}){return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-primary",children:[e.jsx(p,{name:"sort",size:18}),e.jsxs("span",{children:["Urutkan: ",A[s]]})]}),i&&e.jsx("div",{className:"absolute right-0 top-full z-40 mt-1 min-w-[180px] rounded-md border border-slate-200 bg-white py-1 shadow-lg",children:P.map(d=>e.jsx("button",{onClick:()=>r(d),className:`w-full px-4 py-2 text-left text-sm ${s===d?"bg-primary/5 font-medium text-primary":"text-slate-700 hover:bg-slate-50"}`,children:A[d]},d))})]})}const _=12;function re({classes:s=[],mentors:r=[],categories:i=[]}){const[c,d]=x.useState(""),[a,h]=x.useState("all"),[n,j]=x.useState(null),[m,D]=x.useState(null),[v,M]=x.useState("newest"),[y,u]=x.useState(1),[N,f]=x.useState(!1),[k,b]=x.useState(!1),[C,g]=x.useState(!1),w=x.useMemo(()=>{let t=s.filter(l=>l.status==="published");if(a==="free"?t=t.filter(l=>l.price_final===0):a==="paid"&&(t=t.filter(l=>l.price_final>0)),n!==null&&(t=t.filter(l=>l.category_id===n)),m!==null&&(t=t.filter(l=>l.mentors.some(o=>o.id===m))),c.trim()){const l=c.toLowerCase();t=t.filter(o=>o.title.toLowerCase().includes(l)||o.description&&o.description.toLowerCase().includes(l)||o.category&&o.category.name.toLowerCase().includes(l)||o.mentors.some(K=>K.name.toLowerCase().includes(l)))}switch(v){case"title_asc":t.sort((l,o)=>l.title.localeCompare(o.title));break;case"title_desc":t.sort((l,o)=>o.title.localeCompare(l.title));break;case"price_asc":t.sort((l,o)=>l.price_final-o.price_final);break;case"price_desc":t.sort((l,o)=>o.price_final-l.price_final);break;case"newest":t.sort((l,o)=>o.id-l.id);break;case"oldest":t.sort((l,o)=>l.id-o.id);break}return t},[s,a,n,m,c,v]),E=Math.ceil(w.length/_),S=x.useMemo(()=>{const t=(y-1)*_;return w.slice(t,t+_)},[w,y]),T=()=>{d(""),h("all"),j(null),D(null),M("newest"),u(1)},R=()=>{f(!1),b(!1),g(!1)},$=t=>{d(t),u(1)},O=t=>{h(t),u(1)},I=t=>{j(t),f(!1),u(1)},F=t=>{D(t),b(!1),u(1)},B=t=>{M(t),g(!1)},U=c||n||m||a!=="all";return e.jsxs(q,{children:[e.jsx(H,{title:"Eksplorasi Kelas"}),(N||k||C)&&e.jsx("div",{className:"fixed inset-0 z-30",onClick:R}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-2 text-center sm:space-y-4 sm:text-left",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 sm:text-3xl md:text-4xl",children:"Eksplorasi Modul Pembelajaran"}),e.jsx("p",{className:"mx-auto max-w-2xl text-sm text-slate-500 sm:mx-0 sm:text-base md:text-lg",children:"Tingkatkan keahlian Anda dengan kurikulum terstruktur dari mentor berpengalaman."})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsx(Z,{value:c,onChange:$}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(X,{activeTab:a,onTabChange:O}),e.jsx("div",{className:"hidden h-8 w-px bg-slate-200 sm:block"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{label:"Kategori",options:i.map(t=>({id:t.id,name:t.name})),selectedValue:n,onSelect:I,isOpen:N,onToggle:()=>{f(!N),b(!1),g(!1)},allLabel:"Semua Kategori"}),e.jsx(z,{label:"Mentor",options:r.map(t=>({id:t.id,name:t.name})),selectedValue:m,onSelect:F,isOpen:k,onToggle:()=>{b(!k),f(!1),g(!1)},allLabel:"Semua Mentor"}),U&&e.jsx("button",{onClick:T,className:"ml-2 text-sm font-medium text-red-600 hover:text-red-700",children:"Reset"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 pt-4",children:[e.jsxs("p",{className:"text-sm text-slate-500",children:["Menampilkan"," ",e.jsx("span",{className:"font-semibold text-slate-900",children:S.length})," ","dari"," ",e.jsx("span",{className:"font-semibold text-slate-900",children:w.length})," ","kelas"]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(ee,{value:v,onChange:B,isOpen:C,onToggle:()=>{g(!C),f(!1),b(!1)}})})]})]}),S.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:S.map(t=>e.jsx(V,{item:t},t.id))}):e.jsx(J,{onReset:T}),e.jsx(Y,{currentPage:y,totalPages:E,onPageChange:u})]})]})}export{re as default};
