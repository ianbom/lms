import{j as e,r as f,H as U,L as F}from"./app-UtKUC6ir.js";import{a as j,F as z}from"./FormInput-Dptc1j_G.js";import{I as p}from"./Icon-D6o0Wb4v.js";import{R as N}from"./RichTextEditor-Bqsq39_m.js";import{a as D}from"./AdminLayout-Cxk5dXNS.js";function M({title:s="Pro Tip",message:d,className:r=""}){return e.jsx("div",{className:`rounded-xl border border-blue-100 bg-blue-50 p-5 ${r}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{name:"lightbulb",size:20,className:"mt-0.5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-blue-900",children:s}),e.jsx("p",{className:"mt-1 text-xs leading-relaxed text-blue-700",children:d})]})]})})}const V={pdf:{icon:"picture_as_pdf",bgColor:"bg-red-50",iconColor:"text-red-500"},doc:{icon:"description",bgColor:"bg-blue-50",iconColor:"text-blue-500"},zip:{icon:"folder_zip",bgColor:"bg-yellow-50",iconColor:"text-yellow-600"},other:{icon:"insert_drive_file",bgColor:"bg-gray-50",iconColor:"text-gray-500"}};function _({file:s,onRemove:d}){const r=V[s.type];return e.jsxs("div",{className:"group relative flex items-center overflow-hidden rounded-lg border border-[#e5e7eb] bg-white p-3",children:[s.isUploading&&e.jsx("div",{className:"absolute bottom-0 left-0 h-1 w-full bg-[#f0f5f2]",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${s.progress||0}%`}})}),e.jsx("div",{className:`mr-4 flex h-10 w-10 items-center justify-center rounded-lg ${r.bgColor}`,children:e.jsx(p,{name:r.icon,size:24,className:r.iconColor})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm font-medium text-[#101814]",children:s.name}),s.isUploading?e.jsxs("p",{className:"flex items-center gap-1 text-xs text-[#5e6a62]",children:[e.jsx("span",{className:"h-2 w-2 animate-pulse rounded-full bg-primary"}),"Uploading... ",s.progress,"%"]}):e.jsxs("p",{className:"text-xs text-[#a0b3a9]",children:[s.size,s.uploadedAt&&` â€¢ ${s.uploadedAt}`]})]}),e.jsx("button",{type:"button",onClick:()=>d?.(s.id),className:`rounded-lg p-2 transition-colors ${s.isUploading?"text-[#a0b3a9] hover:text-[#5e6a62]":"text-[#a0b3a9] opacity-0 hover:bg-red-50 hover:text-red-500 group-hover:opacity-100"}`,children:e.jsx(p,{name:s.isUploading?"close":"delete",size:20})})]})}function T({onFilesSelected:s,accept:d=".pdf,.docx,.zip",maxSize:r="25MB",className:x=""}){const t=i=>{i.preventDefault(),i.dataTransfer.files.length>0&&s?.(i.dataTransfer.files)},o=i=>{i.target.files&&i.target.files.length>0&&s?.(i.target.files)};return e.jsxs("label",{onDrop:t,onDragOver:i=>i.preventDefault(),className:`group flex cursor-pointer flex-col items-center justify-center rounded-xl border-2 border-dashed border-[#dae7e0] p-8 text-center transition-colors hover:border-primary hover:bg-primary/5 ${x}`,children:[e.jsx("input",{type:"file",accept:d,multiple:!0,onChange:o,className:"hidden"}),e.jsx("div",{className:"mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 transition-transform group-hover:scale-110",children:e.jsx(p,{name:"cloud_upload",size:24,className:"text-primary"})}),e.jsx("p",{className:"text-sm font-semibold text-[#101814]",children:"Click to upload or drag and drop"}),e.jsxs("p",{className:"mt-1 text-xs text-[#a0b3a9]",children:["PDF, DOCX, or ZIP (max ",r,")"]})]})}function R({label:s,value:d,icon:r,className:x=""}){return e.jsxs("div",{className:`flex flex-col gap-1.5 ${x}`,children:[e.jsx("label",{className:"text-sm font-medium text-[#101814]",children:s}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:d,readOnly:!0,className:"h-12 w-full cursor-not-allowed rounded-lg border border-[#e5e7eb] bg-[#f9fafb] py-2.5 pl-4 pr-10 text-sm text-[#5e6a62] shadow-sm"}),r&&e.jsx(p,{name:r,size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#a0b3a9]"})]})]})}function A({label:s,prefix:d="https://",placeholder:r,value:x,onChange:t,onCheck:o,helpText:i,className:h=""}){return e.jsxs("div",{className:`flex flex-col gap-1.5 ${h}`,children:[e.jsx("label",{className:"text-sm font-medium text-[#101814]",children:s}),e.jsxs("div",{className:"relative flex rounded-lg shadow-sm",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("span",{className:"text-sm text-[#5e6a62]",children:d})}),e.jsx("input",{type:"text",value:x,onChange:c=>t?.(c.target.value),placeholder:r,className:"block h-12 w-full rounded-lg border border-[#dae7e0] bg-white py-2.5 pl-16 pr-20 text-sm text-[#101814] placeholder-[#a0b3a9] transition-all focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"}),o&&e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:e.jsx("button",{type:"button",onClick:o,className:"rounded-md bg-primary/10 px-3 py-1.5 text-xs font-medium text-primary transition-colors hover:bg-primary/20",children:"Check"})})]}),i&&e.jsx("p",{className:"text-xs text-[#a0b3a9]",children:i})]})}function I({title:s="Untitled Video",thumbnailUrl:d,visibility:r="Public",quality:x="1080p HD",subtitles:t="Auto-generated (EN)",onOpenInYouTube:o,className:i=""}){return e.jsxs("div",{className:`overflow-hidden rounded-xl border border-[#e5e7eb] bg-white shadow-lg shadow-gray-200/50 ${i}`,children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-[#e5e7eb] px-6 py-4",children:[e.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-[#101814]",children:"Live Preview"}),e.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-green-100 px-2.5 py-1 text-xs font-medium text-green-800",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-green-500"}),"Ready"]})]}),e.jsxs("div",{className:"group relative aspect-video cursor-pointer bg-black",children:[d?e.jsx("img",{src:d,alt:"Video thumbnail",className:"h-full w-full object-cover opacity-80 transition-opacity group-hover:opacity-60"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-br from-[#1a221e] to-[#0f1512]",children:e.jsx(p,{name:"movie",size:48,className:"text-[#5e6a62]"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full border border-white/40 bg-white/20 backdrop-blur-sm transition-transform duration-300 group-hover:scale-110",children:e.jsx(p,{name:"play_arrow",size:40,className:"ml-1 text-white"})})}),e.jsx("div",{className:"absolute left-4 top-4 max-w-[80%] truncate font-medium text-white drop-shadow-md",children:s})]}),e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[#5e6a62]",children:"Visibility"}),e.jsx("span",{className:"font-medium text-[#101814]",children:r})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[#5e6a62]",children:"Quality"}),e.jsx("span",{className:"font-medium text-[#101814]",children:x})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[#5e6a62]",children:"Subtitles"}),e.jsx("span",{className:"font-medium text-[#101814]",children:t})]}),e.jsx("div",{className:"mt-2 border-t border-[#e5e7eb] pt-4",children:e.jsxs("button",{type:"button",onClick:o,className:"flex w-full items-center justify-center gap-2 rounded-lg border border-[#dae7e0] py-2.5 text-sm font-semibold text-[#5e6a62] transition-colors hover:bg-[#f9fafb]",children:[e.jsx(p,{name:"open_in_new",size:18}),"Open in YouTube"]})})]})]})}function P({video:s,index:d,isFirst:r=!1,onChange:x,onRemove:t,onCheckUrl:o,onFilesSelected:i,onRemoveFile:h}){return e.jsxs("div",{className:"rounded-xl border border-[#e5e7eb] bg-white p-6 md:p-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between border-b border-[#e5e7eb] pb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#101814]",children:[e.jsx(p,{name:"play_circle",size:20,className:"text-primary"}),e.jsxs("h2",{className:"text-base font-bold",children:["Video ",d+1]})]}),!r&&e.jsxs("button",{type:"button",onClick:()=>t(s.id),className:"flex items-center gap-1 rounded-lg px-3 py-1.5 text-sm font-medium text-red-500 transition-colors hover:bg-red-50",children:[e.jsx(p,{name:"delete",size:18}),"Remove"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col gap-6 lg:col-span-2",children:[e.jsx(j,{label:"Video Title",required:!0,placeholder:"e.g. Introduction to Neural Networks",value:s.title,onChange:c=>x(s.id,"title",c)}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(A,{label:"YouTube URL",placeholder:"youtube.com/watch?v=...",value:s.youtubeUrl,onChange:c=>x(s.id,"youtubeUrl",c),onCheck:()=>o?.(s.id),helpText:"Supports YouTube, Vimeo, and Wistia links."})}),e.jsx(R,{label:"Duration",value:s.duration||"--:--",icon:"schedule"})]}),e.jsx(N,{label:"Description",value:s.description,onChange:c=>x(s.id,"description",c),placeholder:"Add a brief summary about what students will learn...",maxLength:1e3}),e.jsxs("div",{className:"rounded-lg border border-[#f0f5f2] bg-[#f9fafb] p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#101814]",children:[e.jsx(p,{name:"folder_open",size:18,className:"text-primary"}),e.jsx("span",{className:"text-sm font-semibold",children:"Supporting Materials"})]}),e.jsx("span",{className:"rounded bg-[#e5e7eb] px-2 py-0.5 text-[10px] font-medium text-[#5e6a62]",children:"Optional"})]}),e.jsx(T,{onFilesSelected:c=>i?.(s.id,c),className:"bg-white"}),s.files.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:s.files.map(c=>e.jsx(_,{file:c,onRemove:()=>h?.(s.id,c.id)},c.id))})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"sticky top-4",children:e.jsx(I,{title:s.title||"Untitled Video",thumbnailUrl:s.thumbnailUrl,className:"shadow-none"})})})]})]})}const g=s=>({id:s,title:"",youtubeUrl:"",duration:"",description:"",thumbnailUrl:void 0,files:[]});function H(){const[s,d]=f.useState(""),[r,x]=f.useState(""),[t,o]=f.useState([g(1)]),i=(l,a,m)=>{o(t.map(n=>n.id===l?{...n,[a]:m}:n))},h=()=>{const l=Math.max(...t.map(a=>a.id))+1;o([...t,g(l)])},c=l=>{t.length>1&&o(t.filter(a=>a.id!==l))},y=l=>{const a=t.find(m=>m.id===l);a&&(console.log("Checking URL for video:",a.youtubeUrl),o(t.map(m=>m.id===l?{...m,duration:"14:20",thumbnailUrl:"https://lh3.googleusercontent.com/aida-public/AB6AXuCRdrr0DlIBoElr9siVP_raMljRjhIcO1FePdwA_6rXExzg9w6wJGmDsnCqyXL8vTvfKWQIV-rxXtylBZxXr3Js12NhP47PhzVuajRYuaZUm2HkFTSsl7FA12JQ3HncHRp5M-ccJDuINHl1y15qxKp28uMa8Bhi6gF_6_Z848XBhlGFMa98zIscgFxcF4tyHeMFdNOYC2_rk3ncMXqcvDDagGv4zI7D3RmbJiQob73NVFEyPbWib6ZG_qED5Swyq_PTKUihrFvZC4-X"}:m)))},v=(l,a)=>{const m=Array.from(a).map((n,u)=>({id:Date.now()+u,name:n.name,size:`${(n.size/1024/1024).toFixed(1)} MB`,type:n.name.endsWith(".pdf")?"pdf":n.name.endsWith(".docx")?"doc":n.name.endsWith(".zip")?"zip":"other",progress:0,isUploading:!0}));o(t.map(n=>n.id===l?{...n,files:[...n.files,...m]}:n)),setTimeout(()=>{o(n=>n.map(u=>u.id===l?{...u,files:u.files.map(b=>m.some(k=>k.id===b.id)?{...b,isUploading:!1,uploadedAt:"Uploaded just now"}:b)}:u))},2e3)},w=(l,a)=>{o(t.map(m=>m.id===l?{...m,files:m.files.filter(n=>n.id!==a)}:m))},C=t.reduce((l,a)=>l+a.files.length,0);return e.jsxs(D,{breadcrumbs:[{label:"Classes",href:route("admin.classes")},{label:"Create Module"}],children:[e.jsx(U,{title:"Create Module"}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-[#101814]",children:"Create New Module"}),e.jsx("p",{className:"mt-1 text-[#5e6a62]",children:"Add module details and video content"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{href:route("admin.classes"),className:"rounded-lg border border-[#dae7e0] bg-white px-5 py-2.5 text-sm font-semibold text-[#5e6a62] transition-colors hover:bg-[#f9fafb]",children:"Cancel"}),e.jsxs("button",{type:"button",className:"flex items-center gap-2 rounded-lg bg-primary px-5 py-2.5 text-sm font-semibold text-white shadow-md shadow-primary/20 transition-all hover:bg-[#00622e]",children:[e.jsx(p,{name:"save",size:20}),"Save Module"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-4",children:[e.jsxs("div",{className:"flex flex-col gap-6 lg:col-span-3",children:[e.jsx(z,{icon:"folder",title:"Module Information",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(j,{label:"Module Title",required:!0,placeholder:"e.g. Advanced Marketing Strategies",value:s,onChange:d}),e.jsx(N,{label:"Module Description",value:r,onChange:x,placeholder:"Describe what students will learn in this module...",maxLength:500})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-lg font-bold text-[#101814]",children:["Videos (",t.length,")"]})}),t.map((l,a)=>e.jsx(P,{video:l,index:a,isFirst:a===0,onChange:i,onRemove:c,onCheckUrl:y,onFilesSelected:v,onRemoveFile:w},l.id)),e.jsxs("button",{type:"button",onClick:h,className:"flex w-full items-center justify-center gap-2 rounded-xl border-2 border-dashed border-[#dae7e0] bg-white py-4 text-sm font-semibold text-primary transition-colors hover:border-primary hover:bg-primary/5",children:[e.jsx(p,{name:"add_circle",size:20}),"Add New Video"]})]})]}),e.jsx("div",{className:"flex flex-col gap-6 lg:col-span-1",children:e.jsxs("div",{className:"sticky top-6 space-y-6",children:[e.jsxs("div",{className:"overflow-hidden rounded-xl border border-[#e5e7eb] bg-white shadow-lg shadow-gray-200/50",children:[e.jsx("div",{className:"border-b border-[#e5e7eb] px-6 py-4",children:e.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-[#101814]",children:"Module Summary"})}),e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[#5e6a62]",children:"Module Title"}),e.jsx("span",{className:"max-w-[120px] truncate font-medium text-[#101814]",children:s||"Untitled"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[#5e6a62]",children:"Total Videos"}),e.jsx("span",{className:"font-medium text-[#101814]",children:t.length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[#5e6a62]",children:"Total Files"}),e.jsx("span",{className:"font-medium text-[#101814]",children:C})]}),t.length>0&&e.jsxs("div",{className:"mt-4 border-t border-[#e5e7eb] pt-4",children:[e.jsx("p",{className:"mb-3 text-xs font-semibold uppercase tracking-wider text-[#5e6a62]",children:"Videos"}),e.jsx("div",{className:"space-y-2",children:t.map((l,a)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded bg-primary/10 text-xs font-medium text-primary",children:a+1}),e.jsx("span",{className:"flex-1 truncate text-[#101814]",children:l.title||"Untitled"})]},l.id))})]})]})]}),e.jsx(M,{message:"Each video can have its own supporting materials like PDFs, slides, or resources."})]})})]})]})}export{H as default};
