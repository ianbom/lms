import{j as e,L as g,r as p,H as z}from"./app-C5N62aGV.js";import{I as c}from"./Icon-CDWY4AO3.js";import{A as _}from"./AdminLayout-DDA11E6E.js";import"./Avatar-B_3ZgP3A.js";import"./Toast-B2Zq2dyX.js";const D={published:{label:"Published",variant:"success",dotColor:"bg-green-500"},draft:{label:"Draft",variant:"default",dotColor:"bg-gray-400"},reviewing:{label:"Reviewing",variant:"warning",dotColor:"bg-yellow-500"}},K={success:"bg-green-100 text-green-800 border-green-200",warning:"bg-yellow-100 text-yellow-800 border-yellow-200",default:"bg-gray-100 text-gray-700 border-gray-200"};function L({status:t,className:r=""}){const n=D[t];return e.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs font-medium ${K[n.variant]} ${r}`,children:[e.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${n.dotColor}`}),n.label]})}function $({classItem:t}){const r=()=>t.isFree?e.jsx("span",{className:"text-sm font-bold text-primary",children:"Gratis"}):e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm font-bold text-[#101814]",children:["Rp ",t.price.toLocaleString("id-ID")]}),t.originalPrice&&e.jsxs("span",{className:"text-[10px] text-[#5e6a62] line-through",children:["Rp ",t.originalPrice.toLocaleString("id-ID")]})]});return e.jsxs("tr",{className:"group transition-colors hover:bg-[#f0f5f2]",children:[e.jsx("td",{className:"px-6 py-4 align-middle",children:e.jsx("div",{className:"relative h-12 w-20 overflow-hidden rounded-md bg-cover bg-center shadow-sm transition-shadow group-hover:shadow-md",style:{backgroundImage:`url('${t.thumbnail}')`},children:e.jsx("div",{className:"absolute inset-0 bg-black/5 opacity-0 transition-opacity group-hover:opacity-100"})})}),e.jsx("td",{className:"px-6 py-4 align-middle",children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"line-clamp-1 text-sm font-bold text-[#101814] transition-colors group-hover:text-primary",children:t.title}),e.jsx("span",{className:"text-xs text-[#5e8d74]",children:t.category})]})}),e.jsx("td",{className:"px-6 py-4 align-middle",children:r()}),e.jsx("td",{className:"px-6 py-4 align-middle",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(c,{name:"grid_view",size:16,className:"text-[#5e8d74]"}),e.jsxs("span",{className:"text-sm text-[#5e6a62]",children:[t.modules," Modul"]})]})}),e.jsx("td",{className:"px-6 py-4 align-middle",children:e.jsx(L,{status:t.status})}),e.jsx("td",{className:"px-6 py-4 align-middle",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs(g,{href:route("admin.classes.show",t.id),className:"flex h-8 items-center gap-1.5 rounded-md border border-[#e5e7eb] bg-white px-3 text-xs font-medium text-[#5e6a62] transition-colors hover:border-primary hover:text-primary",title:"Detail",children:[e.jsx(c,{name:"visibility",size:14}),"Detail"]}),e.jsxs(g,{href:route("admin.module.create",t.id),className:"flex h-8 items-center gap-1.5 rounded-md border border-[#e5e7eb] bg-white px-3 text-xs font-medium text-[#5e6a62] transition-colors hover:border-blue-500 hover:text-blue-500",title:"Buat Modul",children:[e.jsx(c,{name:"library_add",size:14}),"Modul"]}),e.jsxs(g,{href:route("admin.quiz.create",t.id),className:"flex h-8 items-center gap-1.5 rounded-md border border-[#e5e7eb] bg-white px-3 text-xs font-medium text-[#5e6a62] transition-colors hover:border-amber-500 hover:text-amber-500",title:"Buat Kuis",children:[e.jsx(c,{name:"quiz",size:14}),"Kuis"]})]})})]})}function E({classes:t}){return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#e5e7eb] bg-[#f9fafb]",children:[e.jsx("th",{className:"w-[80px] px-6 py-4 text-xs font-semibold uppercase tracking-wider text-[#5e6a62]",children:"Gambar"}),e.jsx("th",{className:"min-w-[240px] px-6 py-4 text-xs font-semibold uppercase tracking-wider text-[#5e6a62]",children:"Info Kelas"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold uppercase tracking-wider text-[#5e6a62]",children:"Harga"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold uppercase tracking-wider text-[#5e6a62]",children:"Modul"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold uppercase tracking-wider text-[#5e6a62]",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-[#5e6a62]",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-[#f0f5f2]",children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-sm text-[#5e6a62]",children:"Tidak ada data kelas ditemukan."})}):t.map(r=>e.jsx($,{classItem:r},r.id))})]})})}function y({icon:t,label:r,options:n=[],value:i,onChange:o,onClick:m,className:h=""}){const[x,a]=p.useState(!1),l=d=>{o?.(d),a(!1)};return n.length===0?e.jsxs("button",{onClick:m,className:`flex h-10 items-center gap-2 rounded-md border border-[#dae7e0] bg-white px-4 text-sm font-medium text-[#101814] transition-colors hover:bg-[#f9fafb] ${h}`,children:[e.jsx(c,{name:t,size:18,className:"text-[#5e8d74]"}),r,e.jsx(c,{name:"expand_more",size:18,className:"text-[#5e6a62]"})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!x),onBlur:()=>setTimeout(()=>a(!1),200),className:`flex h-10 items-center gap-2 rounded-md border border-[#dae7e0] bg-white px-4 text-sm font-medium text-[#101814] transition-colors hover:bg-[#f9fafb] ${h}`,children:[e.jsx(c,{name:t,size:18,className:"text-[#5e8d74]"}),r,e.jsx(c,{name:x?"expand_less":"expand_more",size:18,className:"text-[#5e6a62]"})]}),x&&e.jsx("div",{className:"absolute left-0 top-full z-20 mt-1 min-w-full rounded-md border border-[#e5e7eb] bg-white py-1 shadow-lg",children:n.map(d=>e.jsxs("button",{onClick:()=>l(d.value),className:`flex w-full items-center gap-2 px-4 py-2 text-left text-sm transition-colors hover:bg-[#f9fafb] ${i===d.value?"bg-primary/5 font-medium text-primary":"text-[#5e6a62]"}`,children:[i===d.value&&e.jsx(c,{name:"check",size:16}),d.label]},d.value))})]})}function T({placeholder:t="Search...",value:r,onChange:n,className:i=""}){return e.jsxs("div",{className:`relative ${i}`,children:[e.jsx(c,{name:"search",size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5e8d74]"}),e.jsx("input",{type:"text",placeholder:t,value:r,onChange:o=>n?.(o.target.value),className:"h-10 w-full rounded-md border border-[#dae7e0] bg-white py-2 pl-10 pr-4 text-sm text-[#101814] placeholder-[#5e8d74] transition-all focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"})]})}function A({searchValue:t,onSearchChange:r,selectedCategory:n,onCategoryChange:i,selectedStatus:o,onStatusChange:m,categories:h=[],onExportClick:x}){const a=[{value:"",label:"Semua Status"},{value:"published",label:"Dipublikasi"},{value:"draft",label:"Draft"}],l=[{value:"",label:"Semua Kategori"},...h];return e.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 rounded-xl border border-[#e5e7eb] bg-white p-4 shadow-sm lg:flex-row lg:items-center",children:[e.jsx(T,{placeholder:"Cari kelas, instruktur...",value:t,onChange:r,className:"w-full lg:w-96"}),e.jsxs("div",{className:"flex w-full flex-wrap items-center gap-3 lg:w-auto",children:[e.jsx(y,{icon:"category",label:l.find(d=>d.value===n)?.label||"Semua Kategori",options:l,value:n,onChange:i}),e.jsx(y,{icon:"filter_list",label:a.find(d=>d.value===o)?.label||"Semua Status",options:a,value:o,onChange:m}),e.jsx("div",{className:"hidden h-6 w-px bg-[#e5e7eb] sm:block"}),e.jsx("button",{onClick:x,title:"Ekspor Data",className:"flex h-10 w-10 items-center justify-center rounded-md border border-[#dae7e0] bg-white text-[#5e6a62] transition-colors hover:text-primary",children:e.jsx(c,{name:"download",size:20})})]})]})}function B({currentPage:t,totalPages:r,totalItems:n,itemsPerPage:i,onPageChange:o}){const m=(t-1)*i+1,h=Math.min(t*i,n),x=()=>{const a=[];if(r<=5)for(let l=1;l<=r;l++)a.push(l);else{a.push(1),t>3&&a.push("...");for(let l=Math.max(2,t-1);l<=Math.min(r-1,t+1);l++)a.includes(l)||a.push(l);t<r-2&&a.push("..."),a.includes(r)||a.push(r)}return a};return e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 border-t border-[#e5e7eb] px-6 py-4 sm:flex-row",children:[e.jsxs("p",{className:"text-sm text-[#5e6a62]",children:["Showing"," ",e.jsx("span",{className:"font-bold text-[#101814]",children:m})," to"," ",e.jsx("span",{className:"font-bold text-[#101814]",children:h})," of"," ",e.jsx("span",{className:"font-bold text-[#101814]",children:n})," ","results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o?.(t-1),disabled:t===1,className:"rounded-md border border-[#dae7e0] px-4 py-2 text-sm font-medium text-[#5e6a62] transition-colors hover:bg-[#f0f5f2] hover:text-primary disabled:cursor-not-allowed disabled:opacity-50",children:"Previous"}),e.jsx("div",{className:"hidden items-center gap-1 sm:flex",children:x().map((a,l)=>typeof a=="number"?e.jsx("button",{onClick:()=>o?.(a),className:`flex h-8 w-8 items-center justify-center rounded-md text-sm font-medium transition-colors ${a===t?"bg-primary text-white shadow-sm":"text-[#5e6a62] hover:bg-[#f0f5f2]"}`,children:a},l):e.jsx("span",{className:"text-[#5e6a62]",children:a},l))}),e.jsx("button",{onClick:()=>o?.(t+1),disabled:t===r,className:"rounded-md border border-[#dae7e0] px-4 py-2 text-sm font-medium text-[#5e6a62] transition-colors hover:bg-[#f0f5f2] hover:text-primary disabled:cursor-not-allowed disabled:opacity-50",children:"Next"})]})]})}const b=10;function q({classes:t}){const[r,n]=p.useState(""),[i,o]=p.useState(""),[m,h]=p.useState(""),[x,a]=p.useState(1),l=t.map(s=>({id:s.id,title:s.title,category:s.category?.name||"Tanpa Kategori",categoryId:s.category?.id?.toString()||"",price:s.price_final,originalPrice:s.discount>0?s.price:void 0,modules:s.modules_count,status:s.status,thumbnail:s.thumbnail_url||"",isFree:s.price_final===0})),d=p.useMemo(()=>{const s=new Map;return t.forEach(u=>{u.category&&s.set(u.category.id.toString(),u.category.name)}),Array.from(s).map(([u,j])=>({value:u,label:j}))},[t]),f=p.useMemo(()=>l.filter(s=>{const u=r.toLowerCase(),j=r===""||s.title.toLowerCase().includes(u)||s.category.toLowerCase().includes(u),k=i===""||s.categoryId===i,M=m===""||s.status===m;return j&&k&&M}),[l,r,i,m]),N=Math.ceil(f.length/b),w=p.useMemo(()=>{const s=(x-1)*b;return f.slice(s,s+b)},[f,x]),v=s=>{n(s),a(1)},C=s=>{o(s),a(1)},S=s=>{h(s),a(1)};return e.jsxs(_,{breadcrumbs:[{label:"Kelas"}],children:[e.jsx(z,{title:"Manajemen Kelas"}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-[#101814]",children:"Manajemen Kelas"}),e.jsx("p",{className:"mt-1 text-sm text-[#5e6a62]",children:"Kelola semua kelas dan konten pembelajaran Anda."})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(g,{href:route("admin.classes.create"),className:"flex h-10 items-center justify-center gap-2 rounded-md bg-primary px-4 text-sm font-bold text-white shadow-md shadow-primary/20 transition-all hover:bg-[#00622e]",children:[e.jsx(c,{name:"add",size:20}),e.jsx("span",{className:"truncate",children:"Buat Kelas Baru"})]})})]}),e.jsx(A,{searchValue:r,onSearchChange:v,selectedCategory:i,onCategoryChange:C,selectedStatus:m,onStatusChange:S,categories:d}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-md bg-white px-4 py-2 shadow-sm",children:[e.jsx("span",{className:"text-sm text-[#5e6a62]",children:"Total:"}),e.jsxs("span",{className:"text-sm font-bold text-[#101814]",children:[t.length," Kelas"]})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-md bg-white px-4 py-2 shadow-sm",children:[e.jsx("span",{className:"text-sm text-[#5e6a62]",children:"Dipublikasi:"}),e.jsx("span",{className:"text-sm font-bold text-primary",children:t.filter(s=>s.status==="published").length})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-md bg-white px-4 py-2 shadow-sm",children:[e.jsx("span",{className:"text-sm text-[#5e6a62]",children:"Draft:"}),e.jsx("span",{className:"text-sm font-bold text-amber-600",children:t.filter(s=>s.status==="draft").length})]}),f.length!==t.length&&e.jsx("div",{className:"flex items-center gap-2 rounded-md bg-blue-50 px-4 py-2 shadow-sm",children:e.jsxs("span",{className:"text-sm text-blue-600",children:["Menampilkan ",f.length," dari"," ",t.length," kelas"]})})]}),e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-xl border border-[#e5e7eb] bg-white shadow-sm",children:[e.jsx(E,{classes:w}),f.length>0&&e.jsx(B,{currentPage:x,totalPages:N,totalItems:f.length,itemsPerPage:b,onPageChange:a})]}),e.jsx("div",{className:"mt-auto py-6 text-center",children:e.jsxs("p",{className:"text-xs text-[#9aabb1]",children:["Â© ",new Date().getFullYear()," EduManage System. Hak cipta dilindungi."]})})]})}export{q as default};
