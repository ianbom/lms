import{j as e}from"./app-wjlaHdqt.js";import{a as w,F as I}from"./FormInput-CQDoE4hj.js";import{I as u}from"./Icon-CqVksNsp.js";import{R as k}from"./RichTextEditor-J6tvwGnQ.js";function V({title:s="Pro Tip",message:r,className:l=""}){return e.jsx("div",{className:`rounded-xl border border-blue-100 bg-blue-50 p-5 ${l}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{name:"lightbulb",size:20,className:"mt-0.5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-blue-900",children:s}),e.jsx("p",{className:"mt-1 text-xs leading-relaxed text-blue-700",children:r})]})]})})}const F={pdf:{icon:"picture_as_pdf",bgColor:"bg-red-50",iconColor:"text-red-500"},doc:{icon:"description",bgColor:"bg-blue-50",iconColor:"text-blue-500"},zip:{icon:"folder_zip",bgColor:"bg-yellow-50",iconColor:"text-yellow-600"},other:{icon:"insert_drive_file",bgColor:"bg-gray-50",iconColor:"text-gray-500"}};function M({file:s,onRemove:r}){const l=F[s.type];return e.jsxs("div",{className:"group relative flex items-center overflow-hidden rounded-md border border-[#e5e7eb] bg-white p-3",children:[s.isUploading&&e.jsx("div",{className:"absolute bottom-0 left-0 h-1 w-full bg-[#f0f5f2]",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${s.progress||0}%`}})}),e.jsx("div",{className:`mr-4 flex h-10 w-10 items-center justify-center rounded-md ${l.bgColor}`,children:e.jsx(u,{name:l.icon,size:24,className:l.iconColor})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm font-medium text-[#101814]",children:s.name}),s.isUploading?e.jsxs("p",{className:"flex items-center gap-1 text-xs text-[#5e6a62]",children:[e.jsx("span",{className:"h-2 w-2 animate-pulse rounded-full bg-primary"}),"Uploading... ",s.progress,"%"]}):e.jsxs("p",{className:"text-xs text-[#a0b3a9]",children:[s.size,s.uploadedAt&&` â€¢ ${s.uploadedAt}`]})]}),e.jsx("button",{type:"button",onClick:()=>r?.(s.id),className:`rounded-md p-2 transition-colors ${s.isUploading?"text-[#a0b3a9] hover:text-[#5e6a62]":"text-[#a0b3a9] opacity-0 hover:bg-red-50 hover:text-red-500 group-hover:opacity-100"}`,children:e.jsx(u,{name:s.isUploading?"close":"delete",size:20})})]})}function R({onFilesSelected:s,accept:r=".pdf,.docx,.zip",maxSize:l="25MB",className:c=""}){const x=n=>{n.preventDefault(),n.dataTransfer.files.length>0&&s?.(n.dataTransfer.files)},p=n=>{n.target.files&&n.target.files.length>0&&s?.(n.target.files)};return e.jsxs("label",{onDrop:x,onDragOver:n=>n.preventDefault(),className:`group flex cursor-pointer flex-col items-center justify-center rounded-xl border-2 border-dashed border-[#dae7e0] p-8 text-center transition-colors hover:border-primary hover:bg-primary/5 ${c}`,children:[e.jsx("input",{type:"file",accept:r,multiple:!0,onChange:p,className:"hidden"}),e.jsx("div",{className:"mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 transition-transform group-hover:scale-110",children:e.jsx(u,{name:"cloud_upload",size:24,className:"text-primary"})}),e.jsx("p",{className:"text-sm font-semibold text-[#101814]",children:"Click to upload or drag and drop"}),e.jsxs("p",{className:"mt-1 text-xs text-[#a0b3a9]",children:["PDF, DOCX, or ZIP (max ",l,")"]})]})}function _({label:s,value:r,icon:l,className:c=""}){return e.jsxs("div",{className:`flex flex-col gap-1.5 ${c}`,children:[e.jsx("label",{className:"text-sm font-medium text-[#101814]",children:s}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r,readOnly:!0,className:"h-12 w-full cursor-not-allowed rounded-md border border-[#e5e7eb] bg-[#f9fafb] py-2.5 pl-4 pr-10 text-sm text-[#5e6a62] shadow-sm"}),l&&e.jsx(u,{name:l,size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#a0b3a9]"})]})]})}function S({label:s,prefix:r="https://",placeholder:l,value:c,onChange:x,onCheck:p,helpText:n,className:f=""}){return e.jsxs("div",{className:`flex flex-col gap-1.5 ${f}`,children:[e.jsx("label",{className:"text-sm font-medium text-[#101814]",children:s}),e.jsxs("div",{className:"relative flex rounded-md shadow-sm",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("span",{className:"text-sm text-[#5e6a62]",children:r})}),e.jsx("input",{type:"text",value:c,onChange:m=>x?.(m.target.value),placeholder:l,className:"block h-12 w-full rounded-md border border-[#dae7e0] bg-white py-2.5 pl-16 pr-20 text-sm text-[#101814] placeholder-[#a0b3a9] transition-all focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"}),p&&e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:e.jsx("button",{type:"button",onClick:p,className:"rounded-md bg-primary/10 px-3 py-1.5 text-xs font-medium text-primary transition-colors hover:bg-primary/20",children:"Check"})})]}),n&&e.jsx("p",{className:"text-xs text-[#a0b3a9]",children:n})]})}function D({title:s="Video Tanpa Judul",thumbnailUrl:r,visibility:l="Public",quality:c="1080p HD",subtitles:x="Auto-generated (EN)",onOpenInYouTube:p,className:n=""}){return e.jsxs("div",{className:`overflow-hidden rounded-xl border border-[#e5e7eb] bg-white shadow-lg shadow-gray-200/50 ${n}`,children:[e.jsx("div",{className:"flex items-center justify-between border-b border-[#e5e7eb] px-6 py-4",children:e.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-[#101814]",children:"Pratinjau Langsung"})}),e.jsxs("div",{className:"group relative aspect-video cursor-pointer bg-black",children:[r?e.jsx("img",{src:r,alt:"Thumbnail video",className:"h-full w-full object-cover opacity-80 transition-opacity group-hover:opacity-60"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-br from-[#1a221e] to-[#0f1512]",children:e.jsx(u,{name:"movie",size:48,className:"text-[#5e6a62]"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full border border-white/40 bg-white/20 backdrop-blur-sm transition-transform duration-300 group-hover:scale-110",children:e.jsx(u,{name:"play_arrow",size:40,className:"ml-1 text-white"})})}),e.jsx("div",{className:"absolute left-4 top-4 max-w-[80%] truncate font-medium text-white drop-shadow-md",children:s})]}),e.jsx("div",{className:"space-y-4 p-6",children:e.jsx("div",{className:"mt-2 border-t border-[#e5e7eb] pt-4",children:e.jsxs("button",{type:"button",onClick:p,className:"flex w-full items-center justify-center gap-2 rounded-md border border-[#dae7e0] py-2.5 text-sm font-semibold text-[#5e6a62] transition-colors hover:bg-[#f9fafb]",children:[e.jsx(u,{name:"open_in_new",size:18}),"Buka di YouTube"]})})})]})}function Y({video:s,index:r,isFirst:l=!1,onChange:c,onRemove:x,onCheckUrl:p,onFilesSelected:n,onRemoveFile:f}){return e.jsxs("div",{className:"rounded-xl border border-[#e5e7eb] bg-white p-6 md:p-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between border-b border-[#e5e7eb] pb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#101814]",children:[e.jsx(u,{name:"play_circle",size:20,className:"text-primary"}),e.jsxs("h2",{className:"text-base font-bold",children:["Video ",r+1]})]}),!l&&e.jsxs("button",{type:"button",onClick:()=>x(s.id),className:"flex items-center gap-1 rounded-md px-3 py-1.5 text-sm font-medium text-red-500 transition-colors hover:bg-red-50",children:[e.jsx(u,{name:"delete",size:18}),"Remove"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col gap-6 lg:col-span-2",children:[e.jsx(w,{label:"Judul Video",required:!0,placeholder:"contoh: Pengenalan Jaringan Neural",value:s.title,onChange:m=>c(s.id,"title",m)}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(S,{label:"URL YouTube",placeholder:"youtube.com/watch?v=...",value:s.youtubeUrl,onChange:m=>c(s.id,"youtubeUrl",m),onCheck:()=>p?.(s.id),helpText:"Mendukung link YouTube, Vimeo, dan Wistia."})}),e.jsx(_,{label:"Durasi",value:s.duration||"--:--",icon:"schedule"})]}),e.jsx(k,{label:"Deskripsi",value:s.description,onChange:m=>c(s.id,"description",m),placeholder:"Tambahkan ringkasan singkat tentang apa yang akan dipelajari siswa...",maxLength:1e3}),e.jsxs("div",{className:"flex items-center justify-between rounded-md border border-[#e5e7eb] bg-[#f9fafb] p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{name:"visibility",size:20,className:"text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#101814]",children:"Pratinjau Gratis"}),e.jsx("p",{className:"text-xs text-[#5e6a62]",children:"Izinkan pengguna yang belum terdaftar untuk menonton video ini"})]})]}),e.jsx("button",{type:"button",onClick:()=>c(s.id,"isPreview",!s.isPreview),className:`relative h-6 w-11 rounded-full transition-colors ${s.isPreview?"bg-primary":"bg-[#d1d5db]"}`,children:e.jsx("span",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${s.isPreview?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"rounded-md border border-[#f0f5f2] bg-[#f9fafb] p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#101814]",children:[e.jsx(u,{name:"folder_open",size:18,className:"text-primary"}),e.jsx("span",{className:"text-sm font-semibold",children:"Materi Pendukung"})]}),e.jsx("span",{className:"rounded bg-[#e5e7eb] px-2 py-0.5 text-[10px] font-medium text-[#5e6a62]",children:"Opsional"})]}),e.jsx(R,{onFilesSelected:m=>n?.(s.id,m),className:"bg-white"}),s.files.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:s.files.map(m=>e.jsx(M,{file:m,onRemove:()=>f?.(s.id,m.id)},m.id))})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"sticky top-4",children:e.jsx(D,{title:s.title||"Untitled Video",thumbnailUrl:s.thumbnailUrl,className:"shadow-none",onOpenInYouTube:s.youtubeUrl?()=>window.open(s.youtubeUrl,"_blank"):void 0})})})]})]})}const A=s=>({id:s,title:"",youtubeUrl:"",duration:"",durationSec:0,description:"",thumbnailUrl:void 0,isPreview:!1,files:[]});function W({data:s,errors:r,onDataChange:l,isCompact:c=!1}){const x=t=>{l({...s,videos:t})},p=(t,i,o)=>{x(s.videos.map(a=>a.id===t?{...a,[i]:o}:a))},n=()=>{const t=s.videos.length>0?Math.max(...s.videos.map(i=>i.id))+1:1;x([...s.videos,A(t)])},f=t=>{s.videos.length>1&&x(s.videos.filter(i=>i.id!==t))},m=t=>{const i=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/)([^&\n?#]+)/,/youtube\.com\/shorts\/([^&\n?#]+)/];for(const o of i){const a=t.match(o);if(a&&a[1])return a[1]}return null},U=t=>{const i=Math.floor(t/3600),o=Math.floor(t%3600/60),a=Math.floor(t%60);return i>0?`${i}:${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${o}:${a.toString().padStart(2,"0")}`},$=t=>{const i=s.videos.find(o=>o.id===t);if(i&&i.youtubeUrl){const o=m(i.youtubeUrl);if(o){const a=`https://img.youtube.com/vi/${o}/maxresdefault.jpg`,d=`https://www.youtube.com/watch?v=${o}`;x(s.videos.map(h=>h.id===t?{...h,thumbnailUrl:a,youtubeUrl:d,duration:"Loading..."}:h)),new Promise(h=>{if(window.YT&&window.YT.Player){h();return}const b=document.createElement("script");b.src="https://www.youtube.com/iframe_api";const g=document.getElementsByTagName("script")[0];g.parentNode?.insertBefore(b,g),window.onYouTubeIframeAPIReady=()=>h()}).then(()=>{const h=`yt-player-${t}-${Date.now()}`,b=document.createElement("div");b.id=h,b.style.display="none",document.body.appendChild(b),new window.YT.Player(h,{videoId:o,events:{onReady:g=>{const v=Math.floor(g.target.getDuration()),z=U(v);l(N=>({...N,videos:N.videos.map(j=>j.id===t?{...j,thumbnailUrl:a,youtubeUrl:d,duration:z,durationSec:v}:j)})),g.target.destroy(),b.remove()}}})})}else x(s.videos.map(a=>a.id===t?{...a,thumbnailUrl:void 0,duration:"Invalid URL",durationSec:0}:a))}},C=(t,i)=>{const o=Array.from(i).map((d,y)=>({id:Date.now()+y,name:d.name,size:`${(d.size/1024/1024).toFixed(1)} MB`,type:d.name.endsWith(".pdf")?"pdf":d.name.endsWith(".docx")||d.name.endsWith(".doc")?"doc":d.name.endsWith(".zip")?"zip":"other",progress:100,isUploading:!1,uploadedAt:"Ready to submit",file:d})),a=s.videos.map(d=>d.id===t?{...d,files:[...d.files,...o]}:d);l({...s,videos:a})},T=(t,i)=>{const o=s.videos.map(a=>a.id===t?{...a,files:a.files.filter(d=>d.id!==i)}:a);l({...s,videos:o})},P=s.videos.reduce((t,i)=>t+i.files.length,0);return e.jsxs("div",{className:`grid grid-cols-1 gap-8 ${c?"lg:grid-cols-1":"lg:grid-cols-4"}`,children:[e.jsxs("div",{className:`flex flex-col gap-6 ${c?"":"lg:col-span-3"}`,children:[e.jsx(I,{icon:"folder",title:"Informasi Modul",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(w,{label:"Judul Modul",required:!0,placeholder:"contoh: Strategi Pemasaran Lanjutan",value:s.title,onChange:t=>l({...s,title:t}),error:r.title}),e.jsx(k,{label:"Deskripsi Modul",value:s.description,onChange:t=>l({...s,description:t}),placeholder:"Jelaskan apa yang akan dipelajari siswa di modul ini...",maxLength:500,error:r.description})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-lg font-bold text-[#101814]",children:["Video (",s.videos.length,")"]})}),r.videos&&e.jsx("div",{className:"text-sm text-red-500",children:r.videos}),s.videos.map((t,i)=>e.jsxs("div",{children:[e.jsx(Y,{video:t,index:i,isFirst:i===0,onChange:p,onRemove:f,onCheckUrl:$,onFilesSelected:C,onRemoveFile:T}),r[`videos.${i}.title`]&&e.jsx("div",{className:"mt-1 text-sm text-red-500",children:r[`videos.${i}.title`]}),r[`videos.${i}.youtube_url`]&&e.jsx("div",{className:"mt-1 text-sm text-red-500",children:r[`videos.${i}.youtube_url`]})]},t.id)),e.jsxs("button",{type:"button",onClick:n,className:"flex w-full items-center justify-center gap-2 rounded-xl border-2 border-dashed border-[#dae7e0] bg-white py-4 text-sm font-semibold text-primary transition-colors hover:border-primary hover:bg-primary/5",children:[e.jsx(u,{name:"add_circle",size:20}),"Tambah Video Baru"]})]})]}),!c&&e.jsx("div",{className:"flex flex-col gap-6 lg:col-span-1",children:e.jsxs("div",{className:"sticky top-6 space-y-6",children:[e.jsxs("div",{className:"overflow-hidden rounded-xl border border-[#e5e7eb] bg-white shadow-lg shadow-gray-200/50",children:[e.jsx("div",{className:"border-b border-[#e5e7eb] px-6 py-4",children:e.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-[#101814]",children:"Ringkasan Modul"})}),e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[#5e6a62]",children:"Judul Modul"}),e.jsx("span",{className:"max-w-[120px] truncate font-medium text-[#101814]",children:s.title||"Belum ada judul"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[#5e6a62]",children:"Total Video"}),e.jsx("span",{className:"font-medium text-[#101814]",children:s.videos.length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[#5e6a62]",children:"Total File"}),e.jsx("span",{className:"font-medium text-[#101814]",children:P})]}),s.videos.length>0&&e.jsxs("div",{className:"mt-4 border-t border-[#e5e7eb] pt-4",children:[e.jsx("p",{className:"mb-3 text-xs font-semibold uppercase tracking-wider text-[#5e6a62]",children:"Daftar Video"}),e.jsx("div",{className:"space-y-2",children:s.videos.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded bg-primary/10 text-xs font-medium text-primary",children:i+1}),e.jsx("span",{className:"flex-1 truncate text-[#101814]",children:t.title||"Belum ada judul"})]},t.id))})]})]})]}),e.jsx(V,{message:"Setiap video dapat memiliki materi pendukung seperti PDF, slide, atau sumber daya lainnya."})]})})]})}export{W as M,A as c};
