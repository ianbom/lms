import{j as e,r as i,a as g,H as b}from"./app-B2Z8cRq3.js";import{I as d}from"./Icon-DBwaLCyv.js";import{T as j,D as v,P as N}from"./TableToolbar-Cn_hmprE.js";import{A as y}from"./AdminLayout-Dx2bDVLc.js";import"./lodash-BeRe4jle.js";import"./Avatar-DtCPdeWf.js";function w({stats:s}){return e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"flex flex-col justify-between rounded-xl border border-slate-100 bg-white p-5 shadow-[0_2px_10px_-3px_rgba(6,81,237,0.1)]",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Orders"}),e.jsx("div",{className:"mt-2 flex items-end justify-between",children:e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.total})})]}),e.jsxs("div",{className:"flex flex-col justify-between rounded-xl border border-l-4 border-y-slate-100 border-l-orange-500 border-r-slate-100 bg-white p-5 shadow-[0_2px_10px_-3px_rgba(6,81,237,0.1)]",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Menunggu Verifikasi"}),e.jsx("div",{className:"mt-2 flex items-end justify-between",children:e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:s.pending})})]}),e.jsxs("div",{className:"flex flex-col justify-between rounded-xl border border-slate-100 bg-white p-5 shadow-[0_2px_10px_-3px_rgba(6,81,237,0.1)]",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Approved"}),e.jsx("div",{className:"mt-2 flex items-end justify-between",children:e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.approved})})]}),e.jsxs("div",{className:"flex flex-col justify-between rounded-xl border border-slate-100 bg-white p-5 shadow-[0_2px_10px_-3px_rgba(6,81,237,0.1)]",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Rejected"}),e.jsx("div",{className:"mt-2 flex items-end justify-between",children:e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.rejected})})]})]})}const k=[{value:null,label:"Semua"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}];function _({orders:s,filters:r,pagination:l}){const[n,c]=i.useState(!1),[a,x]=i.useState({isOpen:!1,orderId:null,action:null}),m=(t,f)=>{x({isOpen:!0,orderId:t,action:f})},o=()=>{x({isOpen:!1,orderId:null,action:null})},p=()=>{if(!a.orderId||!a.action)return;c(!0);const t=a.action==="approve"?"admin.orders.approve":"admin.orders.reject";g.post(route(t,{orderId:a.orderId}),{},{preserveScroll:!0,onSuccess:()=>{o()},onFinish:()=>{c(!1)}})},u=i.useMemo(()=>[{key:"id",header:"Order ID",render:t=>e.jsxs("span",{className:"whitespace-nowrap text-sm font-medium text-slate-900",children:["#ORD-",t.id]})},{key:"user",header:"User",render:t=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-9 w-9 flex-shrink-0 items-center justify-center rounded-full bg-slate-200 bg-cover bg-center",style:t.user.avatar?{backgroundImage:`url('${t.user.avatar}')`}:{},children:!t.user.avatar&&t.user.name.charAt(0)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"whitespace-nowrap text-sm font-semibold text-slate-900",children:t.user.name}),e.jsx("span",{className:"text-xs text-slate-500",children:t.user.email})]})]})},{key:"class",header:"Class",render:t=>e.jsx("span",{className:"text-sm text-slate-600",children:t.class.title})},{key:"amount",header:"Harga Kelas",headerClassName:"text-right whitespace-nowrap",className:"text-right whitespace-nowrap",render:t=>e.jsx("span",{className:"text-sm font-bold text-slate-900",children:t.formatted_amount||`Rp ${t.amount.toLocaleString("id-ID")}`})},{key:"status",header:"Status",render:t=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ring-1 ring-inset ${t.status==="pending"?"bg-orange-50 text-orange-700 ring-orange-600/20":t.status==="approved"?"bg-green-50 text-green-700 ring-green-600/20":"bg-red-50 text-red-700 ring-red-600/20"}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})},{key:"transfer_date",header:"Tanggal Transfer",headerClassName:"whitespace-nowrap",render:t=>e.jsx("span",{className:"whitespace-nowrap text-sm text-slate-600",children:new Date(t.transfer_date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})})},{key:"proof",header:"Bukti",headerClassName:"text-center",className:"text-center",render:t=>e.jsx("a",{href:t.proof_url,target:"_blank",rel:"noreferrer",className:`inline-flex justify-center transition-colors ${t.proof_url?"text-slate-400 hover:text-primary":"cursor-not-allowed text-slate-300"}`,children:e.jsx(d,{name:"receipt_long"})})},{key:"actions",header:"Aksi",headerClassName:"text-right",className:"text-right",render:t=>e.jsx(e.Fragment,{children:t.status==="pending"?e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>m(t.id,"reject"),disabled:n,className:"flex size-8 items-center justify-center rounded-md border border-slate-200 text-red-500 transition-colors hover:border-red-200 hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-50",title:"Reject",children:e.jsx(d,{name:"close",size:18})}),e.jsx("button",{onClick:()=>m(t.id,"approve"),disabled:n,className:"flex size-8 items-center justify-center rounded-md bg-primary text-white shadow-sm transition-colors hover:bg-primary-dark disabled:cursor-not-allowed disabled:opacity-50",title:"Approve",children:e.jsx(d,{name:"check",size:18})})]}):t.status==="rejected"?e.jsx("span",{className:"text-xs font-medium text-red-400",children:"Rejected"}):e.jsx("span",{className:"text-xs font-medium text-green-500",children:"Approved"})})}],[n]),h=i.useMemo(()=>({icon:"shopping_cart",title:"Tidak ada order",description:r.search||r.status?"Tidak ada order yang cocok dengan filter pencarian.":"Belum ada order yang masuk."}),[r.search,r.status]);return e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-xl border border-slate-200 bg-white shadow-sm",children:[e.jsx(j,{filters:r,routeName:"admin.orders",searchPlaceholder:"Search by Order ID, User...",filterOptions:k}),e.jsx(v,{columns:u,data:s,keyExtractor:t=>t.id,emptyState:h}),e.jsx(N,{from:l.from,to:l.to,total:l.total,links:l.links}),a.isOpen&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 transition-opacity",onClick:o}),e.jsx("div",{className:"relative z-10 w-full max-w-md rounded-xl bg-white p-6 shadow-xl",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[e.jsx("div",{className:`flex h-14 w-14 items-center justify-center rounded-full ${a.action==="approve"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:e.jsx(d,{name:a.action==="approve"?"check_circle":"cancel",size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:a.action==="approve"?"Approve Order":"Reject Order"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:a.action==="approve"?"Apakah Anda yakin ingin menyetujui order ini? Peserta akan didaftarkan ke kelas.":"Apakah Anda yakin ingin menolak order ini? Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs("div",{className:"mt-2 flex w-full gap-3",children:[e.jsx("button",{onClick:o,disabled:n,className:"flex-1 rounded-lg border border-slate-200 px-4 py-2.5 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50 disabled:opacity-50",children:"Batal"}),e.jsx("button",{onClick:p,disabled:n,className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium text-white transition-colors disabled:opacity-50 ${a.action==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:n?"Memproses...":a.action==="approve"?"Ya, Setujui":"Ya, Tolak"})]})]})})]})]})}function D({orders:s,stats:r,filters:l}){return e.jsxs(y,{breadcrumbs:[{label:"Orders",href:"#"},{label:"List",href:"#"}],children:[e.jsx(b,{title:"Liste Order"}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-start sm:justify-between",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-slate-900",children:"Daftar Order Kelas"}),e.jsx("p",{className:"text-slate-500",children:"Manajemen Order Kelas"})]})}),e.jsx(w,{stats:r}),e.jsx(_,{orders:s.data,filters:l,pagination:{currentPage:s.current_page,lastPage:s.last_page,perPage:s.per_page,total:s.total,from:s.from,to:s.to,links:s.links}})]})]})}export{D as default};
